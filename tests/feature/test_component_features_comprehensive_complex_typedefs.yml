# Test metadata
test:
  name: "Component Features Complex Typedefs Parsing"
  description: "Test parsing complex typedef relationships through CLI interface"
  category: "feature"
  id: "1010"

---
# Source files
source_files:
  typedef_test.c: |
    #include <stdio.h>

    typedef struct {
        int id;
        char name[100];
    } User;

    typedef User* UserPtr;
    typedef int Integer;
    typedef void (*Callback)(int);

    struct ComplexStruct {
        UserPtr users;
        Integer count;
        Callback callback;
    };

---
# Configuration
config.json: |
  {
    "project_name": "component_test",
    "source_folders": ["."],
    "recursive_search": true,
    "output_dir": "./output"
  }

---
# Assertions
assertions:
  execution:
    exit_code: 0
    max_execution_time: 30.0
    stdout_contains: "PlantUML generation complete"
  
  model:
    validate_structure: true
    project_name: "component_test"
    expected_files: ["typedef_test.c"]
    
    structs_exist: ["User", "ComplexStruct"]
    includes_exist: ["stdio.h"]
    
    element_counts:
      structs: 2
      includes: 1
  
  puml:
    syntax_valid: true
    file_count: 1
    contains_elements: ["User", "ComplexStruct", "UserPtr", "Integer", "Callback"]
    contains_lines: ["@startuml typedef_test", "@enduml"]
    
    files:
      typedef_test.puml:
        syntax_valid: true
        contains_elements: ["User", "ComplexStruct"]
        not_empty: true