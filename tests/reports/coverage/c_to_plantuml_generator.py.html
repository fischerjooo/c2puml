<!DOCTYPE html>
<html>
<head>
    <title>Coverage Report: c_to_plantuml/generator.py</title>
    <style>
        body {
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
        }
        .header {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        h1 {
            margin: 0 0 10px 0;
            color: #333;
            font-size: 24px;
        }
        .stats {
            display: flex;
            gap: 30px;
            margin-top: 20px;
        }
        .stat {
            display: flex;
            flex-direction: column;
        }
        .stat-label {
            font-size: 12px;
            color: #666;
            text-transform: uppercase;
        }
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #333;
        }
        .coverage-bar {
            width: 200px;
            height: 20px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
            margin-top: 5px;
        }
        .coverage-fill {
            height: 100%;
            background: #4caf50;
            transition: width 0.3s ease;
        }
        .code-container {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .code-header {
            background: #333;
            color: white;
            padding: 10px 20px;
            font-size: 14px;
        }
        .code-lines {
            display: table;
            width: 100%;
        }
        .code-line {
            display: table-row;
            transition: background-color 0.2s;
        }
        .code-line:hover {
            background-color: #f0f0f0;
        }
        .line-number {
            display: table-cell;
            width: 50px;
            padding: 0 10px;
            text-align: right;
            background: #f8f8f8;
            color: #999;
            border-right: 1px solid #e0e0e0;
            user-select: none;
            font-size: 12px;
            vertical-align: top;
        }
        .line-status {
            display: table-cell;
            width: 30px;
            text-align: center;
            font-size: 14px;
            vertical-align: top;
            padding: 0 5px;
        }
        .line-content {
            display: table-cell;
            padding: 0 20px;
            white-space: pre;
            font-size: 14px;
            vertical-align: top;
        }
        .covered {
            background-color: #e8f5e9;
        }
        .covered .line-status {
            color: #4caf50;
        }
        .missing {
            background-color: #ffebee;
        }
        .missing .line-status {
            color: #f44336;
        }
        .excluded {
            background-color: #f5f5f5;
            color: #999;
        }
        .excluded .line-status {
            color: #999;
        }
        .legend {
            margin-top: 20px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .legend-item {
            display: inline-block;
            margin-right: 20px;
        }
        .legend-color {
            display: inline-block;
            width: 20px;
            height: 20px;
            vertical-align: middle;
            margin-right: 5px;
            border-radius: 3px;
        }
        .timestamp {
            color: #666;
            font-size: 12px;
        }
        /* Syntax highlighting */
        .keyword { color: #0000ff; font-weight: bold; }
        .string { color: #008000; }
        .comment { color: #808080; font-style: italic; }
        .number { color: #098658; }
        .function { color: #795E26; }
        .class { color: #267F99; font-weight: bold; }
        .back-link {
            margin-bottom: 20px;
        }
        .back-link a {
            color: #0066cc;
            text-decoration: none;
        }
        .back-link a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="back-link">
        <a href="index.html">← Back to Coverage Index</a>
    </div>
    
    <div class="header">
        <h1>Coverage Report: c_to_plantuml/generator.py</h1>
        <div class="timestamp">Generated: 2025-07-26 16:01:44</div>
        
        <div class="stats">
            <div class="stat">
                <span class="stat-label">Coverage</span>
                <span class="stat-value">95.2%</span>
                <div class="coverage-bar">
                    <div class="coverage-fill" style="width: 95.23809523809523%"></div>
                </div>
            </div>
            <div class="stat">
                <span class="stat-label">Statements</span>
                <span class="stat-value">294</span>
            </div>
            <div class="stat">
                <span class="stat-label">Covered</span>
                <span class="stat-value" style="color: #4caf50">280</span>
            </div>
            <div class="stat">
                <span class="stat-label">Missing</span>
                <span class="stat-value" style="color: #f44336">14</span>
            </div>
            <div class="stat">
                <span class="stat-label">Excluded</span>
                <span class="stat-value" style="color: #999">0</span>
            </div>
        </div>
    </div>
    
    <div class="code-container">
        <div class="code-header">Source Code</div>
        <div class="code-lines">
            <div class="code-line ">
                <div class="line-number">1</div>
                <div class="line-status"></div>
                <div class="line-content"><span class="comment">#!/usr/bin/env python3</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">2</div>
                <div class="line-status">✓</div>
                <div class="line-content">&quot;&quot;&quot;</div>
            </div>
            <div class="code-line ">
                <div class="line-number">3</div>
                <div class="line-status"></div>
                <div class="line-content">PlantUML Generat<span class=<span class="string">"keyword"</span>>or</span> that creates proper PlantUML diagrams <span class=<span class="string">"keyword"</span>>from</span> C source <span class=<span class="string">"keyword"</span>>and</span> header files.</div>
            </div>
            <div class="code-line ">
                <div class="line-number">4</div>
                <div class="line-status"></div>
                <div class="line-content">Follows the template format <span class=<span class="string">"keyword"</span>>with</span> strict separation of typedefs <span class=<span class="string">"keyword"</span>>and</span> clear relationship groupings.</div>
            </div>
            <div class="code-line ">
                <div class="line-number">5</div>
                <div class="line-status"></div>
                <div class="line-content">&quot;&quot;&quot;</div>
            </div>
            <div class="code-line ">
                <div class="line-number">6</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">7</div>
                <div class="line-status">✓</div>
                <div class="line-content"><span class=<span class="string">"keyword"</span>>import</span> os</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">8</div>
                <div class="line-status">✓</div>
                <div class="line-content"><span class=<span class="string">"keyword"</span>>from</span> pathlib <span class=<span class="string">"keyword"</span>>import</span> Path</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">9</div>
                <div class="line-status">✓</div>
                <div class="line-content"><span class=<span class="string">"keyword"</span>>from</span> typing <span class=<span class="string">"keyword"</span>>import</span> Dict, List</div>
            </div>
            <div class="code-line ">
                <div class="line-number">10</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">11</div>
                <div class="line-status">✓</div>
                <div class="line-content"><span class=<span class="string">"keyword"</span>>from</span> .models <span class=<span class="string">"keyword"</span>>import</span> FileModel, ProjectModel</div>
            </div>
            <div class="code-line ">
                <div class="line-number">12</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line ">
                <div class="line-number">13</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">14</div>
                <div class="line-status">✓</div>
                <div class="line-content"><span class=<span class="string">"keyword"</span>>class</span> PlantUMLGenerator:</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">15</div>
                <div class="line-status">✓</div>
                <div class="line-content">    &quot;&quot;&quot;PlantUML generat<span class=<span class="string">"keyword"</span>>or</span> that creates proper diagrams following the template format&quot;&quot;&quot;</div>
            </div>
            <div class="code-line ">
                <div class="line-number">16</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">17</div>
                <div class="line-status">✓</div>
                <div class="line-content">    <span class=<span class="string">"keyword"</span>>def</span> __init__(self):</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">18</div>
                <div class="line-status">✓</div>
                <div class="line-content">        pass</div>
            </div>
            <div class="code-line ">
                <div class="line-number">19</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">20</div>
                <div class="line-status">✓</div>
                <div class="line-content">    <span class=<span class="string">"keyword"</span>>def</span> generate_diagram(</div>
            </div>
            <div class="code-line ">
                <div class="line-number">21</div>
                <div class="line-status"></div>
                <div class="line-content">        self, file_model: FileModel, project_model: ProjectModel, include_depth: int = 1</div>
            </div>
            <div class="code-line ">
                <div class="line-number">22</div>
                <div class="line-status"></div>
                <div class="line-content">    ) -&gt; str:</div>
            </div>
            <div class="code-line ">
                <div class="line-number">23</div>
                <div class="line-status"></div>
                <div class="line-content">        &quot;&quot;&quot;Generate a PlantUML diagram <span class=<span class="string">"keyword"</span>>for</span> a file following the template format&quot;&quot;&quot;</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">24</div>
                <div class="line-status">✓</div>
                <div class="line-content">        basename = Path(file_model.file_path).stem</div>
            </div>
            <div class="code-line ">
                <div class="line-number">25</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line ">
                <div class="line-number">26</div>
                <div class="line-status"></div>
                <div class="line-content">        <span class="comment"># Build include tree <span class=<span class="string">"keyword"</span>>for</span> th<span class=<span class="string">"keyword"</span>>is</span> file</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">27</div>
                <div class="line-status">✓</div>
                <div class="line-content">        include_tree = self._build_include_tree(</div>
            </div>
            <div class="code-line ">
                <div class="line-number">28</div>
                <div class="line-status"></div>
                <div class="line-content">            file_model, project_model, include_depth</div>
            </div>
            <div class="code-line ">
                <div class="line-number">29</div>
                <div class="line-status"></div>
                <div class="line-content">        )</div>
            </div>
            <div class="code-line ">
                <div class="line-number">30</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line ">
                <div class="line-number">31</div>
                <div class="line-status"></div>
                <div class="line-content">        <span class="comment"># Get UML IDs <span class=<span class="string">"keyword"</span>>for</span> all elements <span class=<span class="string">"keyword"</span>>in</span> the include tree</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">32</div>
                <div class="line-status">✓</div>
                <div class="line-content">        uml_ids = self._generate_uml_ids(include_tree, project_model)</div>
            </div>
            <div class="code-line ">
                <div class="line-number">33</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line ">
                <div class="line-number">34</div>
                <div class="line-status"></div>
                <div class="line-content">        <span class="comment"># Generate PlantUML content</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">35</div>
                <div class="line-status">✓</div>
                <div class="line-content">        lines = []</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">36</div>
                <div class="line-status">✓</div>
                <div class="line-content">        lines.append(f&quot;@startuml {basename}&quot;)</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">37</div>
                <div class="line-status">✓</div>
                <div class="line-content">        lines.append(&quot;&quot;)</div>
            </div>
            <div class="code-line ">
                <div class="line-number">38</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line ">
                <div class="line-number">39</div>
                <div class="line-status"></div>
                <div class="line-content">        <span class="comment"># Generate classes <span class=<span class="string">"keyword"</span>>for</span> C files <span class=<span class="string">"keyword"</span>>in</span> include tree</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">40</div>
                <div class="line-status">✓</div>
                <div class="line-content">        <span class=<span class="string">"keyword"</span>>for</span> file_path, file_data <span class=<span class="string">"keyword"</span>>in</span> sorted(include_tree.items()):</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">41</div>
                <div class="line-status">✓</div>
                <div class="line-content">            <span class=<span class="string">"keyword"</span>>if</span> file_path.endswith(&quot;.c&quot;):</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">42</div>
                <div class="line-status">✓</div>
                <div class="line-content">                self._generate_c_file_class(lines, file_data, uml_ids)</div>
            </div>
            <div class="code-line ">
                <div class="line-number">43</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line ">
                <div class="line-number">44</div>
                <div class="line-status"></div>
                <div class="line-content">        <span class="comment"># Generate classes <span class=<span class="string">"keyword"</span>>for</span> H files <span class=<span class="string">"keyword"</span>>in</span> include tree</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">45</div>
                <div class="line-status">✓</div>
                <div class="line-content">        <span class=<span class="string">"keyword"</span>>for</span> file_path, file_data <span class=<span class="string">"keyword"</span>>in</span> sorted(include_tree.items()):</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">46</div>
                <div class="line-status">✓</div>
                <div class="line-content">            <span class=<span class="string">"keyword"</span>>if</span> file_path.endswith(&quot;.h&quot;):</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">47</div>
                <div class="line-status">✓</div>
                <div class="line-content">                self._generate_header_class(lines, file_data, uml_ids)</div>
            </div>
            <div class="code-line ">
                <div class="line-number">48</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line ">
                <div class="line-number">49</div>
                <div class="line-status"></div>
                <div class="line-content">        <span class="comment"># Generate type<span class=<span class="string">"keyword"</span>>def</span> classes</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">50</div>
                <div class="line-status">✓</div>
                <div class="line-content">        <span class=<span class="string">"keyword"</span>>for</span> file_path, file_data <span class=<span class="string">"keyword"</span>>in</span> sorted(include_tree.items()):</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">51</div>
                <div class="line-status">✓</div>
                <div class="line-content">            self._generate_typedef_classes(lines, file_data, uml_ids)</div>
            </div>
            <div class="code-line ">
                <div class="line-number">52</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">53</div>
                <div class="line-status">✓</div>
                <div class="line-content">        lines.append(&quot;&quot;)</div>
            </div>
            <div class="code-line ">
                <div class="line-number">54</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line ">
                <div class="line-number">55</div>
                <div class="line-status"></div>
                <div class="line-content">        <span class="comment"># Generate relationships</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">56</div>
                <div class="line-status">✓</div>
                <div class="line-content">        self._generate_relationships(lines, include_tree, uml_ids, project_model)</div>
            </div>
            <div class="code-line ">
                <div class="line-number">57</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">58</div>
                <div class="line-status">✓</div>
                <div class="line-content">        lines.append(&quot;&quot;)</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">59</div>
                <div class="line-status">✓</div>
                <div class="line-content">        lines.append(&quot;@enduml&quot;)</div>
            </div>
            <div class="code-line ">
                <div class="line-number">60</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">61</div>
                <div class="line-status">✓</div>
                <div class="line-content">        <span class=<span class="string">"keyword"</span>>return</span> &quot;\n&quot;.join(lines)</div>
            </div>
            <div class="code-line ">
                <div class="line-number">62</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">63</div>
                <div class="line-status">✓</div>
                <div class="line-content">    <span class=<span class="string">"keyword"</span>>def</span> _build_include_tree(</div>
            </div>
            <div class="code-line ">
                <div class="line-number">64</div>
                <div class="line-status"></div>
                <div class="line-content">        self, root_file: FileModel, project_model: ProjectModel, include_depth: int</div>
            </div>
            <div class="code-line ">
                <div class="line-number">65</div>
                <div class="line-status"></div>
                <div class="line-content">    ) -&gt; Dict[str, FileModel]:</div>
            </div>
            <div class="code-line ">
                <div class="line-number">66</div>
                <div class="line-status"></div>
                <div class="line-content">        &quot;&quot;&quot;Build include tree starting <span class=<span class="string">"keyword"</span>>from</span> root file&quot;&quot;&quot;</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">67</div>
                <div class="line-status">✓</div>
                <div class="line-content">        include_tree = {}</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">68</div>
                <div class="line-status">✓</div>
                <div class="line-content">        visited = set()</div>
            </div>
            <div class="code-line ">
                <div class="line-number">69</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">70</div>
                <div class="line-status">✓</div>
                <div class="line-content">        <span class=<span class="string">"keyword"</span>>def</span> find_file_key(file_name: str) -&gt; str:</div>
            </div>
            <div class="code-line ">
                <div class="line-number">71</div>
                <div class="line-status"></div>
                <div class="line-content">            &quot;&quot;&quot;Find the correct key <span class=<span class="string">"keyword"</span>>for</span> a file <span class=<span class="string">"keyword"</span>>in</span> project_model.files using path matching&quot;&quot;&quot;</div>
            </div>
            <div class="code-line ">
                <div class="line-number">72</div>
                <div class="line-status"></div>
                <div class="line-content">            <span class="comment"># First <span class=<span class="string">"keyword"</span>>try</span> exact match</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">73</div>
                <div class="line-status">✓</div>
                <div class="line-content">            <span class=<span class="string">"keyword"</span>>if</span> file_name <span class=<span class="string">"keyword"</span>>in</span> project_model.files:</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">74</div>
                <div class="line-status">✓</div>
                <div class="line-content">                <span class=<span class="string">"keyword"</span>>return</span> file_name</div>
            </div>
            <div class="code-line ">
                <div class="line-number">75</div>
                <div class="line-status"></div>
                <div class="line-content">            </div>
            </div>
            <div class="code-line ">
                <div class="line-number">76</div>
                <div class="line-status"></div>
                <div class="line-content">            <span class="comment"># Try matching by filename</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">77</div>
                <div class="line-status">✓</div>
                <div class="line-content">            filename = Path(file_name).name</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">78</div>
                <div class="line-status">✓</div>
                <div class="line-content">            <span class=<span class="string">"keyword"</span>>if</span> filename <span class=<span class="string">"keyword"</span>>in</span> project_model.files:</div>
            </div>
            <div class="code-line missing">
                <div class="line-number">79</div>
                <div class="line-status">✗</div>
                <div class="line-content">                <span class=<span class="string">"keyword"</span>>return</span> filename</div>
            </div>
            <div class="code-line ">
                <div class="line-number">80</div>
                <div class="line-status"></div>
                <div class="line-content">            </div>
            </div>
            <div class="code-line ">
                <div class="line-number">81</div>
                <div class="line-status"></div>
                <div class="line-content">            <span class="comment"># Try matching by relative path</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">82</div>
                <div class="line-status">✓</div>
                <div class="line-content">            <span class=<span class="string">"keyword"</span>>for</span> key <span class=<span class="string">"keyword"</span>>in</span> project_model.files.keys():</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">83</div>
                <div class="line-status">✓</div>
                <div class="line-content">                <span class=<span class="string">"keyword"</span>>if</span> Path(key).name == filename:</div>
            </div>
            <div class="code-line missing">
                <div class="line-number">84</div>
                <div class="line-status">✗</div>
                <div class="line-content">                    <span class=<span class="string">"keyword"</span>>return</span> key</div>
            </div>
            <div class="code-line ">
                <div class="line-number">85</div>
                <div class="line-status"></div>
                <div class="line-content">            </div>
            </div>
            <div class="code-line ">
                <div class="line-number">86</div>
                <div class="line-status"></div>
                <div class="line-content">            <span class="comment"># If <span class=<span class="string">"keyword"</span>>not</span> found, <span class=<span class="string">"keyword"</span>>return</span> the filename (will be handled gracefully)</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">87</div>
                <div class="line-status">✓</div>
                <div class="line-content">            <span class=<span class="string">"keyword"</span>>return</span> filename</div>
            </div>
            <div class="code-line ">
                <div class="line-number">88</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">89</div>
                <div class="line-status">✓</div>
                <div class="line-content">        <span class=<span class="string">"keyword"</span>>def</span> add_file_to_tree(file_name: str, depth: int):</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">90</div>
                <div class="line-status">✓</div>
                <div class="line-content">            <span class=<span class="string">"keyword"</span>>if</span> depth &gt; include_depth <span class=<span class="string">"keyword"</span>>or</span> file_name <span class=<span class="string">"keyword"</span>>in</span> visited:</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">91</div>
                <div class="line-status">✓</div>
                <div class="line-content">                return</div>
            </div>
            <div class="code-line ">
                <div class="line-number">92</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">93</div>
                <div class="line-status">✓</div>
                <div class="line-content">            visited.add(file_name)</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">94</div>
                <div class="line-status">✓</div>
                <div class="line-content">            file_key = find_file_key(file_name)</div>
            </div>
            <div class="code-line ">
                <div class="line-number">95</div>
                <div class="line-status"></div>
                <div class="line-content">            </div>
            </div>
            <div class="code-line covered">
                <div class="line-number">96</div>
                <div class="line-status">✓</div>
                <div class="line-content">            <span class=<span class="string">"keyword"</span>>if</span> file_key <span class=<span class="string">"keyword"</span>>in</span> project_model.files:</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">97</div>
                <div class="line-status">✓</div>
                <div class="line-content">                include_tree[file_key] = project_model.files[file_key]</div>
            </div>
            <div class="code-line ">
                <div class="line-number">98</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line ">
                <div class="line-number">99</div>
                <div class="line-status"></div>
                <div class="line-content">                <span class="comment"># Add included files</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">100</div>
                <div class="line-status">✓</div>
                <div class="line-content">                <span class=<span class="string">"keyword"</span>>if</span> depth &lt; include_depth:</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">101</div>
                <div class="line-status">✓</div>
                <div class="line-content">                    <span class=<span class="string">"keyword"</span>>for</span> include <span class=<span class="string">"keyword"</span>>in</span> project_model.files[file_key].includes:</div>
            </div>
            <div class="code-line ">
                <div class="line-number">102</div>
                <div class="line-status"></div>
                <div class="line-content">                        <span class="comment"># Clean the include name (remove quotes/angle brackets)</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">103</div>
                <div class="line-status">✓</div>
                <div class="line-content">                        clean_include = include.strip(&<span class="comment">#x27;&lt;&gt;&quot;&#x27;)</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">104</div>
                <div class="line-status">✓</div>
                <div class="line-content">                        add_file_to_tree(clean_include, depth + 1)</div>
            </div>
            <div class="code-line ">
                <div class="line-number">105</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line ">
                <div class="line-number">106</div>
                <div class="line-status"></div>
                <div class="line-content">        <span class="comment"># Start <span class=<span class="string">"keyword"</span>>with</span> the root file - find the correct key</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">107</div>
                <div class="line-status">✓</div>
                <div class="line-content">        root_key = find_file_key(root_file.relative_path)</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">108</div>
                <div class="line-status">✓</div>
                <div class="line-content">        add_file_to_tree(root_key, 0)</div>
            </div>
            <div class="code-line ">
                <div class="line-number">109</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">110</div>
                <div class="line-status">✓</div>
                <div class="line-content">        <span class=<span class="string">"keyword"</span>>return</span> include_tree</div>
            </div>
            <div class="code-line ">
                <div class="line-number">111</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">112</div>
                <div class="line-status">✓</div>
                <div class="line-content">    <span class=<span class="string">"keyword"</span>>def</span> _generate_uml_ids(</div>
            </div>
            <div class="code-line ">
                <div class="line-number">113</div>
                <div class="line-status"></div>
                <div class="line-content">        self, include_tree: Dict[str, FileModel], project_model: ProjectModel</div>
            </div>
            <div class="code-line ">
                <div class="line-number">114</div>
                <div class="line-status"></div>
                <div class="line-content">    ) -&gt; Dict[str, str]:</div>
            </div>
            <div class="code-line ">
                <div class="line-number">115</div>
                <div class="line-status"></div>
                <div class="line-content">        &quot;&quot;&quot;Generate UML IDs <span class=<span class="string">"keyword"</span>>for</span> all elements <span class=<span class="string">"keyword"</span>>in</span> the include tree using filename-based keys&quot;&quot;&quot;</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">116</div>
                <div class="line-status">✓</div>
                <div class="line-content">        uml_ids = {}</div>
            </div>
            <div class="code-line ">
                <div class="line-number">117</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">118</div>
                <div class="line-status">✓</div>
                <div class="line-content">        <span class=<span class="string">"keyword"</span>>for</span> filename, file_model <span class=<span class="string">"keyword"</span>>in</span> include_tree.items():</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">119</div>
                <div class="line-status">✓</div>
                <div class="line-content">            basename = Path(filename).stem.upper()</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">120</div>
                <div class="line-status">✓</div>
                <div class="line-content">            file_key = Path(filename).name  <span class="comment"># Use just the filename as key</span></div>
            </div>
            <div class="code-line ">
                <div class="line-number">121</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">122</div>
                <div class="line-status">✓</div>
                <div class="line-content">            <span class=<span class="string">"keyword"</span>>if</span> filename.endswith(&quot;.c&quot;):</div>
            </div>
            <div class="code-line ">
                <div class="line-number">123</div>
                <div class="line-status"></div>
                <div class="line-content">                <span class="comment"># C files: no prefix</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">124</div>
                <div class="line-status">✓</div>
                <div class="line-content">                uml_ids[file_key] = basename</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">125</div>
                <div class="line-status">✓</div>
                <div class="line-content">            el<span class=<span class="string">"keyword"</span>>if</span> filename.endswith(&quot;.h&quot;):</div>
            </div>
            <div class="code-line ">
                <div class="line-number">126</div>
                <div class="line-status"></div>
                <div class="line-content">                <span class="comment"># H files: HEADER_ prefix</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">127</div>
                <div class="line-status">✓</div>
                <div class="line-content">                uml_ids[file_key] = f&quot;HEADER_{basename}&quot;</div>
            </div>
            <div class="code-line ">
                <div class="line-number">128</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line ">
                <div class="line-number">129</div>
                <div class="line-status"></div>
                <div class="line-content">            <span class="comment"># Generate type<span class=<span class="string">"keyword"</span>>def</span> UML IDs</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">130</div>
                <div class="line-status">✓</div>
                <div class="line-content">            <span class=<span class="string">"keyword"</span>>for</span> typedef_name <span class=<span class="string">"keyword"</span>>in</span> file_model.structs:</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">131</div>
                <div class="line-status">✓</div>
                <div class="line-content">                uml_ids[f&quot;typedef_{typedef_name}&quot;] = f&quot;TYPEDEF_{typedef_name.upper()}&quot;</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">132</div>
                <div class="line-status">✓</div>
                <div class="line-content">            <span class=<span class="string">"keyword"</span>>for</span> typedef_name <span class=<span class="string">"keyword"</span>>in</span> file_model.enums:</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">133</div>
                <div class="line-status">✓</div>
                <div class="line-content">                uml_ids[f&quot;typedef_{typedef_name}&quot;] = f&quot;TYPEDEF_{typedef_name.upper()}&quot;</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">134</div>
                <div class="line-status">✓</div>
                <div class="line-content">            <span class=<span class="string">"keyword"</span>>for</span> typedef_name <span class=<span class="string">"keyword"</span>>in</span> file_model.aliases:</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">135</div>
                <div class="line-status">✓</div>
                <div class="line-content">                uml_ids[f&quot;typedef_{typedef_name}&quot;] = f&quot;TYPEDEF_{typedef_name.upper()}&quot;</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">136</div>
                <div class="line-status">✓</div>
                <div class="line-content">            <span class=<span class="string">"keyword"</span>>for</span> typedef_name <span class=<span class="string">"keyword"</span>>in</span> file_model.unions:</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">137</div>
                <div class="line-status">✓</div>
                <div class="line-content">                uml_ids[f&quot;typedef_{typedef_name}&quot;] = f&quot;TYPEDEF_{typedef_name.upper()}&quot;</div>
            </div>
            <div class="code-line ">
                <div class="line-number">138</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">139</div>
                <div class="line-status">✓</div>
                <div class="line-content">        <span class=<span class="string">"keyword"</span>>return</span> uml_ids</div>
            </div>
            <div class="code-line ">
                <div class="line-number">140</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">141</div>
                <div class="line-status">✓</div>
                <div class="line-content">    <span class=<span class="string">"keyword"</span>>def</span> _generate_c_file_class(</div>
            </div>
            <div class="code-line ">
                <div class="line-number">142</div>
                <div class="line-status"></div>
                <div class="line-content">        self, lines: List[str], file_model: FileModel, uml_ids: Dict[str, str]</div>
            </div>
            <div class="code-line ">
                <div class="line-number">143</div>
                <div class="line-status"></div>
                <div class="line-content">    ):</div>
            </div>
            <div class="code-line ">
                <div class="line-number">144</div>
                <div class="line-status"></div>
                <div class="line-content">        &quot;&quot;&quot;Generate <span class=<span class="string">"keyword"</span>>class</span> <span class=<span class="string">"keyword"</span>>for</span> C file using filename-based keys&quot;&quot;&quot;</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">145</div>
                <div class="line-status">✓</div>
                <div class="line-content">        basename = Path(file_model.relative_path).stem</div>
            </div>
            <div class="code-line ">
                <div class="line-number">146</div>
                <div class="line-status"></div>
                <div class="line-content">        </div>
            </div>
            <div class="code-line ">
                <div class="line-number">147</div>
                <div class="line-status"></div>
                <div class="line-content">        <span class="comment"># Find the UML ID <span class=<span class="string">"keyword"</span>>for</span> th<span class=<span class="string">"keyword"</span>>is</span> file using filename</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">148</div>
                <div class="line-status">✓</div>
                <div class="line-content">        filename = Path(file_model.relative_path).name</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">149</div>
                <div class="line-status">✓</div>
                <div class="line-content">        uml_id = uml_ids.get(filename)</div>
            </div>
            <div class="code-line ">
                <div class="line-number">150</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">151</div>
                <div class="line-status">✓</div>
                <div class="line-content">        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> uml_id:</div>
            </div>
            <div class="code-line missing">
                <div class="line-number">152</div>
                <div class="line-status">✗</div>
                <div class="line-content">            <span class=<span class="string">"keyword"</span>>return</span>  <span class="comment"># Skip <span class=<span class="string">"keyword"</span>>if</span> no UML ID found</span></div>
            </div>
            <div class="code-line ">
                <div class="line-number">153</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">154</div>
                <div class="line-status">✓</div>
                <div class="line-content">        lines.append(f&<span class="comment">#x27;<span class=<span class="string">"keyword"</span>>class</span> &quot;{basename}&quot; as {uml_id} &lt;&lt;source&gt;&gt; #LightBlue&#x27;)</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">155</div>
                <div class="line-status">✓</div>
                <div class="line-content">        lines.append(&quot;{&quot;)</div>
            </div>
            <div class="code-line ">
                <div class="line-number">156</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line ">
                <div class="line-number">157</div>
                <div class="line-status"></div>
                <div class="line-content">        <span class="comment"># Add macros</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">158</div>
                <div class="line-status">✓</div>
                <div class="line-content">        <span class=<span class="string">"keyword"</span>>if</span> file_model.macros:</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">159</div>
                <div class="line-status">✓</div>
                <div class="line-content">            lines.append(&quot;    -- Macros --&quot;)</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">160</div>
                <div class="line-status">✓</div>
                <div class="line-content">            <span class=<span class="string">"keyword"</span>>for</span> macro <span class=<span class="string">"keyword"</span>>in</span> sorted(file_model.macros):</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">161</div>
                <div class="line-status">✓</div>
                <div class="line-content">                <span class=<span class="string">"keyword"</span>>if</span> &quot;(&quot; <span class=<span class="string">"keyword"</span>>in</span> macro <span class=<span class="string">"keyword"</span>>and</span> &quot;)&quot; <span class=<span class="string">"keyword"</span>>in</span> macro:</div>
            </div>
            <div class="code-line ">
                <div class="line-number">162</div>
                <div class="line-status"></div>
                <div class="line-content">                    <span class="comment"># Function-like macro</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">163</div>
                <div class="line-status">✓</div>
                <div class="line-content">                    macro_name = macro.split(&quot;(&quot;)[0].replace(&quot;<span class="comment">#define &quot;, &quot;&quot;)</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">164</div>
                <div class="line-status">✓</div>
                <div class="line-content">                    params = macro.split(&quot;(&quot;)[1].split(&quot;)&quot;)[0]</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">165</div>
                <div class="line-status">✓</div>
                <div class="line-content">                    lines.append(f&quot;    - <span class="comment">#define {macro_name}({params})&quot;)</span></div>
            </div>
            <div class="code-line ">
                <div class="line-number">166</div>
                <div class="line-status"></div>
                <div class="line-content">                <span class=<span class="string">"keyword"</span>>else</span>:</div>
            </div>
            <div class="code-line ">
                <div class="line-number">167</div>
                <div class="line-status"></div>
                <div class="line-content">                    <span class="comment"># Simple macro</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">168</div>
                <div class="line-status">✓</div>
                <div class="line-content">                    macro_name = macro.replace(&quot;<span class="comment">#define &quot;, &quot;&quot;)</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">169</div>
                <div class="line-status">✓</div>
                <div class="line-content">                    lines.append(f&quot;    - <span class="comment">#define {macro_name}&quot;)</span></div>
            </div>
            <div class="code-line ">
                <div class="line-number">170</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line ">
                <div class="line-number">171</div>
                <div class="line-status"></div>
                <div class="line-content">        <span class="comment"># Add global variables</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">172</div>
                <div class="line-status">✓</div>
                <div class="line-content">        <span class=<span class="string">"keyword"</span>>if</span> file_model.globals:</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">173</div>
                <div class="line-status">✓</div>
                <div class="line-content">            lines.append(&quot;    -- Global Variables --&quot;)</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">174</div>
                <div class="line-status">✓</div>
                <div class="line-content">            <span class=<span class="string">"keyword"</span>>for</span> global_var <span class=<span class="string">"keyword"</span>>in</span> sorted(file_model.globals, key=lambda x: x.name):</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">175</div>
                <div class="line-status">✓</div>
                <div class="line-content">                lines.append(f&quot;    {global_var.type} {global_var.name}&quot;)</div>
            </div>
            <div class="code-line ">
                <div class="line-number">176</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line ">
                <div class="line-number">177</div>
                <div class="line-status"></div>
                <div class="line-content">        <span class="comment"># Add functions</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">178</div>
                <div class="line-status">✓</div>
                <div class="line-content">        <span class=<span class="string">"keyword"</span>>if</span> file_model.functions:</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">179</div>
                <div class="line-status">✓</div>
                <div class="line-content">            lines.append(&quot;    -- Functions --&quot;)</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">180</div>
                <div class="line-status">✓</div>
                <div class="line-content">            <span class=<span class="string">"keyword"</span>>for</span> func <span class=<span class="string">"keyword"</span>>in</span> sorted(file_model.functions, key=lambda x: x.name):</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">181</div>
                <div class="line-status">✓</div>
                <div class="line-content">                <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> func.is_declaration:  <span class="comment"># Only implementation, <span class=<span class="string">"keyword"</span>>not</span> declarations</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">182</div>
                <div class="line-status">✓</div>
                <div class="line-content">                    params = []</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">183</div>
                <div class="line-status">✓</div>
                <div class="line-content">                    <span class=<span class="string">"keyword"</span>>for</span> p <span class=<span class="string">"keyword"</span>>in</span> func.parameters:</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">184</div>
                <div class="line-status">✓</div>
                <div class="line-content">                        <span class=<span class="string">"keyword"</span>>if</span> p.name == &quot;...&quot; <span class=<span class="string">"keyword"</span>>and</span> p.type == &quot;...&quot;:</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">185</div>
                <div class="line-status">✓</div>
                <div class="line-content">                            params.append(&quot;...&quot;)</div>
            </div>
            <div class="code-line ">
                <div class="line-number">186</div>
                <div class="line-status"></div>
                <div class="line-content">                        <span class=<span class="string">"keyword"</span>>else</span>:</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">187</div>
                <div class="line-status">✓</div>
                <div class="line-content">                            params.append(f&quot;{p.type} {p.name}&quot;)</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">188</div>
                <div class="line-status">✓</div>
                <div class="line-content">                    param_str = &quot;, &quot;.join(params)</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">189</div>
                <div class="line-status">✓</div>
                <div class="line-content">                    lines.append(f&quot;    {func.return_type} {func.name}({param_str})&quot;)</div>
            </div>
            <div class="code-line ">
                <div class="line-number">190</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">191</div>
                <div class="line-status">✓</div>
                <div class="line-content">        lines.append(&quot;}&quot;)</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">192</div>
                <div class="line-status">✓</div>
                <div class="line-content">        lines.append(&quot;&quot;)</div>
            </div>
            <div class="code-line ">
                <div class="line-number">193</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">194</div>
                <div class="line-status">✓</div>
                <div class="line-content">    <span class=<span class="string">"keyword"</span>>def</span> _generate_header_class(</div>
            </div>
            <div class="code-line ">
                <div class="line-number">195</div>
                <div class="line-status"></div>
                <div class="line-content">        self, lines: List[str], file_model: FileModel, uml_ids: Dict[str, str]</div>
            </div>
            <div class="code-line ">
                <div class="line-number">196</div>
                <div class="line-status"></div>
                <div class="line-content">    ):</div>
            </div>
            <div class="code-line ">
                <div class="line-number">197</div>
                <div class="line-status"></div>
                <div class="line-content">        &quot;&quot;&quot;Generate <span class=<span class="string">"keyword"</span>>class</span> <span class=<span class="string">"keyword"</span>>for</span> header file using filename-based keys&quot;&quot;&quot;</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">198</div>
                <div class="line-status">✓</div>
                <div class="line-content">        basename = Path(file_model.relative_path).stem</div>
            </div>
            <div class="code-line ">
                <div class="line-number">199</div>
                <div class="line-status"></div>
                <div class="line-content">        </div>
            </div>
            <div class="code-line ">
                <div class="line-number">200</div>
                <div class="line-status"></div>
                <div class="line-content">        <span class="comment"># Find the UML ID <span class=<span class="string">"keyword"</span>>for</span> th<span class=<span class="string">"keyword"</span>>is</span> file using filename</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">201</div>
                <div class="line-status">✓</div>
                <div class="line-content">        filename = Path(file_model.relative_path).name</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">202</div>
                <div class="line-status">✓</div>
                <div class="line-content">        uml_id = uml_ids.get(filename)</div>
            </div>
            <div class="code-line ">
                <div class="line-number">203</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">204</div>
                <div class="line-status">✓</div>
                <div class="line-content">        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> uml_id:</div>
            </div>
            <div class="code-line missing">
                <div class="line-number">205</div>
                <div class="line-status">✗</div>
                <div class="line-content">            <span class=<span class="string">"keyword"</span>>return</span>  <span class="comment"># Skip <span class=<span class="string">"keyword"</span>>if</span> no UML ID found</span></div>
            </div>
            <div class="code-line ">
                <div class="line-number">206</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">207</div>
                <div class="line-status">✓</div>
                <div class="line-content">        lines.append(f&<span class="comment">#x27;<span class=<span class="string">"keyword"</span>>class</span> &quot;{basename}&quot; as {uml_id} &lt;&lt;header&gt;&gt; #LightGreen&#x27;)</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">208</div>
                <div class="line-status">✓</div>
                <div class="line-content">        lines.append(&quot;{&quot;)</div>
            </div>
            <div class="code-line ">
                <div class="line-number">209</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line ">
                <div class="line-number">210</div>
                <div class="line-status"></div>
                <div class="line-content">        <span class="comment"># Add macros</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">211</div>
                <div class="line-status">✓</div>
                <div class="line-content">        <span class=<span class="string">"keyword"</span>>if</span> file_model.macros:</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">212</div>
                <div class="line-status">✓</div>
                <div class="line-content">            lines.append(&quot;    -- Macros --&quot;)</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">213</div>
                <div class="line-status">✓</div>
                <div class="line-content">            <span class=<span class="string">"keyword"</span>>for</span> macro <span class=<span class="string">"keyword"</span>>in</span> sorted(file_model.macros):</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">214</div>
                <div class="line-status">✓</div>
                <div class="line-content">                <span class=<span class="string">"keyword"</span>>if</span> &quot;(&quot; <span class=<span class="string">"keyword"</span>>in</span> macro <span class=<span class="string">"keyword"</span>>and</span> &quot;)&quot; <span class=<span class="string">"keyword"</span>>in</span> macro:</div>
            </div>
            <div class="code-line ">
                <div class="line-number">215</div>
                <div class="line-status"></div>
                <div class="line-content">                    <span class="comment"># Function-like macro</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">216</div>
                <div class="line-status">✓</div>
                <div class="line-content">                    macro_name = macro.split(&quot;(&quot;)[0].replace(&quot;<span class="comment">#define &quot;, &quot;&quot;)</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">217</div>
                <div class="line-status">✓</div>
                <div class="line-content">                    params = macro.split(&quot;(&quot;)[1].split(&quot;)&quot;)[0]</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">218</div>
                <div class="line-status">✓</div>
                <div class="line-content">                    lines.append(f&quot;    + <span class="comment">#define {macro_name}({params})&quot;)</span></div>
            </div>
            <div class="code-line ">
                <div class="line-number">219</div>
                <div class="line-status"></div>
                <div class="line-content">                <span class=<span class="string">"keyword"</span>>else</span>:</div>
            </div>
            <div class="code-line ">
                <div class="line-number">220</div>
                <div class="line-status"></div>
                <div class="line-content">                    <span class="comment"># Simple macro</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">221</div>
                <div class="line-status">✓</div>
                <div class="line-content">                    macro_name = macro.replace(&quot;<span class="comment">#define &quot;, &quot;&quot;)</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">222</div>
                <div class="line-status">✓</div>
                <div class="line-content">                    lines.append(f&quot;    + <span class="comment">#define {macro_name}&quot;)</span></div>
            </div>
            <div class="code-line ">
                <div class="line-number">223</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line ">
                <div class="line-number">224</div>
                <div class="line-status"></div>
                <div class="line-content">        <span class="comment"># Add global variables</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">225</div>
                <div class="line-status">✓</div>
                <div class="line-content">        <span class=<span class="string">"keyword"</span>>if</span> file_model.globals:</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">226</div>
                <div class="line-status">✓</div>
                <div class="line-content">            lines.append(&quot;    -- Global Variables --&quot;)</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">227</div>
                <div class="line-status">✓</div>
                <div class="line-content">            <span class=<span class="string">"keyword"</span>>for</span> global_var <span class=<span class="string">"keyword"</span>>in</span> sorted(file_model.globals, key=lambda x: x.name):</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">228</div>
                <div class="line-status">✓</div>
                <div class="line-content">                lines.append(f&quot;    + {global_var.type} {global_var.name}&quot;)</div>
            </div>
            <div class="code-line ">
                <div class="line-number">229</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line ">
                <div class="line-number">230</div>
                <div class="line-status"></div>
                <div class="line-content">        <span class="comment"># Add functions (only declarations)</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">231</div>
                <div class="line-status">✓</div>
                <div class="line-content">        <span class=<span class="string">"keyword"</span>>if</span> file_model.functions:</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">232</div>
                <div class="line-status">✓</div>
                <div class="line-content">            lines.append(&quot;    -- Functions --&quot;)</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">233</div>
                <div class="line-status">✓</div>
                <div class="line-content">            <span class=<span class="string">"keyword"</span>>for</span> func <span class=<span class="string">"keyword"</span>>in</span> sorted(file_model.functions, key=lambda x: x.name):</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">234</div>
                <div class="line-status">✓</div>
                <div class="line-content">                <span class=<span class="string">"keyword"</span>>if</span> func.is_declaration:  <span class="comment"># Only declarations</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">235</div>
                <div class="line-status">✓</div>
                <div class="line-content">                    params = []</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">236</div>
                <div class="line-status">✓</div>
                <div class="line-content">                    <span class=<span class="string">"keyword"</span>>for</span> p <span class=<span class="string">"keyword"</span>>in</span> func.parameters:</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">237</div>
                <div class="line-status">✓</div>
                <div class="line-content">                        <span class=<span class="string">"keyword"</span>>if</span> p.name == &quot;...&quot; <span class=<span class="string">"keyword"</span>>and</span> p.type == &quot;...&quot;:</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">238</div>
                <div class="line-status">✓</div>
                <div class="line-content">                            params.append(&quot;...&quot;)</div>
            </div>
            <div class="code-line ">
                <div class="line-number">239</div>
                <div class="line-status"></div>
                <div class="line-content">                        <span class=<span class="string">"keyword"</span>>else</span>:</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">240</div>
                <div class="line-status">✓</div>
                <div class="line-content">                            params.append(f&quot;{p.type} {p.name}&quot;)</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">241</div>
                <div class="line-status">✓</div>
                <div class="line-content">                    param_str = &quot;, &quot;.join(params)</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">242</div>
                <div class="line-status">✓</div>
                <div class="line-content">                    lines.append(f&quot;    + {func.return_type} {func.name}({param_str})&quot;)</div>
            </div>
            <div class="code-line ">
                <div class="line-number">243</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">244</div>
                <div class="line-status">✓</div>
                <div class="line-content">        lines.append(&quot;}&quot;)</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">245</div>
                <div class="line-status">✓</div>
                <div class="line-content">        lines.append(&quot;&quot;)</div>
            </div>
            <div class="code-line ">
                <div class="line-number">246</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">247</div>
                <div class="line-status">✓</div>
                <div class="line-content">    <span class=<span class="string">"keyword"</span>>def</span> _generate_typedef_classes(</div>
            </div>
            <div class="code-line ">
                <div class="line-number">248</div>
                <div class="line-status"></div>
                <div class="line-content">        self, lines: List[str], file_model: FileModel, uml_ids: Dict[str, str]</div>
            </div>
            <div class="code-line ">
                <div class="line-number">249</div>
                <div class="line-status"></div>
                <div class="line-content">    ):</div>
            </div>
            <div class="code-line ">
                <div class="line-number">250</div>
                <div class="line-status"></div>
                <div class="line-content">        &quot;&quot;&quot;Generate classes <span class=<span class="string">"keyword"</span>>for</span> typedefs&quot;&quot;&quot;</div>
            </div>
            <div class="code-line ">
                <div class="line-number">251</div>
                <div class="line-status"></div>
                <div class="line-content">        <span class="comment"># Structs</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">252</div>
                <div class="line-status">✓</div>
                <div class="line-content">        <span class=<span class="string">"keyword"</span>>for</span> struct_name, struct_data <span class=<span class="string">"keyword"</span>>in</span> sorted(file_model.structs.items()):</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">253</div>
                <div class="line-status">✓</div>
                <div class="line-content">            uml_id = uml_ids.get(f&quot;typedef_{struct_name}&quot;)</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">254</div>
                <div class="line-status">✓</div>
                <div class="line-content">            <span class=<span class="string">"keyword"</span>>if</span> uml_id:</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">255</div>
                <div class="line-status">✓</div>
                <div class="line-content">                lines.append(</div>
            </div>
            <div class="code-line ">
                <div class="line-number">256</div>
                <div class="line-status"></div>
                <div class="line-content">                    f&<span class="comment">#x27;<span class=<span class="string">"keyword"</span>>class</span> &quot;{struct_name}&quot; as {uml_id} &lt;&lt;typedef&gt;&gt; #LightYellow&#x27;</span></div>
            </div>
            <div class="code-line ">
                <div class="line-number">257</div>
                <div class="line-status"></div>
                <div class="line-content">                )</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">258</div>
                <div class="line-status">✓</div>
                <div class="line-content">                lines.append(&quot;{&quot;)</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">259</div>
                <div class="line-status">✓</div>
                <div class="line-content">                <span class=<span class="string">"keyword"</span>>for</span> field <span class=<span class="string">"keyword"</span>>in</span> sorted(struct_data.fields, key=lambda x: x.name):</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">260</div>
                <div class="line-status">✓</div>
                <div class="line-content">                    self._generate_field_with_nested_structs(lines, field, &quot;    &quot;)</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">261</div>
                <div class="line-status">✓</div>
                <div class="line-content">                lines.append(&quot;}&quot;)</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">262</div>
                <div class="line-status">✓</div>
                <div class="line-content">                lines.append(&quot;&quot;)</div>
            </div>
            <div class="code-line ">
                <div class="line-number">263</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line ">
                <div class="line-number">264</div>
                <div class="line-status"></div>
                <div class="line-content">        <span class="comment"># Enums</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">265</div>
                <div class="line-status">✓</div>
                <div class="line-content">        <span class=<span class="string">"keyword"</span>>for</span> enum_name, enum_data <span class=<span class="string">"keyword"</span>>in</span> sorted(file_model.enums.items()):</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">266</div>
                <div class="line-status">✓</div>
                <div class="line-content">            uml_id = uml_ids.get(f&quot;typedef_{enum_name}&quot;)</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">267</div>
                <div class="line-status">✓</div>
                <div class="line-content">            <span class=<span class="string">"keyword"</span>>if</span> uml_id:</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">268</div>
                <div class="line-status">✓</div>
                <div class="line-content">                lines.append(</div>
            </div>
            <div class="code-line ">
                <div class="line-number">269</div>
                <div class="line-status"></div>
                <div class="line-content">                    f&<span class="comment">#x27;<span class=<span class="string">"keyword"</span>>class</span> &quot;{enum_name}&quot; as {uml_id} &lt;&lt;typedef&gt;&gt; #LightYellow&#x27;</span></div>
            </div>
            <div class="code-line ">
                <div class="line-number">270</div>
                <div class="line-status"></div>
                <div class="line-content">                )</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">271</div>
                <div class="line-status">✓</div>
                <div class="line-content">                lines.append(&quot;{&quot;)</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">272</div>
                <div class="line-status">✓</div>
                <div class="line-content">                <span class=<span class="string">"keyword"</span>>for</span> value <span class=<span class="string">"keyword"</span>>in</span> sorted(enum_data.values, key=lambda x: x.name):</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">273</div>
                <div class="line-status">✓</div>
                <div class="line-content">                    <span class=<span class="string">"keyword"</span>>if</span> value.value:</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">274</div>
                <div class="line-status">✓</div>
                <div class="line-content">                        lines.append(f&quot;    + {value.name} = {value.value}&quot;)</div>
            </div>
            <div class="code-line ">
                <div class="line-number">275</div>
                <div class="line-status"></div>
                <div class="line-content">                    <span class=<span class="string">"keyword"</span>>else</span>:</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">276</div>
                <div class="line-status">✓</div>
                <div class="line-content">                        lines.append(f&quot;    + {value.name}&quot;)</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">277</div>
                <div class="line-status">✓</div>
                <div class="line-content">                lines.append(&quot;}&quot;)</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">278</div>
                <div class="line-status">✓</div>
                <div class="line-content">                lines.append(&quot;&quot;)</div>
            </div>
            <div class="code-line ">
                <div class="line-number">279</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line ">
                <div class="line-number">280</div>
                <div class="line-status"></div>
                <div class="line-content">        <span class="comment"># Aliases (simple typedefs)</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">281</div>
                <div class="line-status">✓</div>
                <div class="line-content">        <span class=<span class="string">"keyword"</span>>for</span> alias_name, alias_data <span class=<span class="string">"keyword"</span>>in</span> sorted(file_model.aliases.items()):</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">282</div>
                <div class="line-status">✓</div>
                <div class="line-content">            uml_id = uml_ids.get(f&quot;typedef_{alias_name}&quot;)</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">283</div>
                <div class="line-status">✓</div>
                <div class="line-content">            <span class=<span class="string">"keyword"</span>>if</span> uml_id:</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">284</div>
                <div class="line-status">✓</div>
                <div class="line-content">                lines.append(</div>
            </div>
            <div class="code-line ">
                <div class="line-number">285</div>
                <div class="line-status"></div>
                <div class="line-content">                    f&<span class="comment">#x27;<span class=<span class="string">"keyword"</span>>class</span> &quot;{alias_name}&quot; as {uml_id} &lt;&lt;typedef&gt;&gt; #LightYellow&#x27;</span></div>
            </div>
            <div class="code-line ">
                <div class="line-number">286</div>
                <div class="line-status"></div>
                <div class="line-content">                )</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">287</div>
                <div class="line-status">✓</div>
                <div class="line-content">                lines.append(&quot;{&quot;)</div>
            </div>
            <div class="code-line ">
                <div class="line-number">288</div>
                <div class="line-status"></div>
                <div class="line-content">                <span class="comment"># Handle multi-line alias types <span class=<span class="string">"keyword"</span>>with</span> proper nested struct indentation</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">289</div>
                <div class="line-status">✓</div>
                <div class="line-content">                alias_lines = alias_data.original_type.split(&<span class="comment">#x27;\n&#x27;)</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">290</div>
                <div class="line-status">✓</div>
                <div class="line-content">                inside_struct = False</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">291</div>
                <div class="line-status">✓</div>
                <div class="line-content">                nested_content = []</div>
            </div>
            <div class="code-line ">
                <div class="line-number">292</div>
                <div class="line-status"></div>
                <div class="line-content">                </div>
            </div>
            <div class="code-line covered">
                <div class="line-number">293</div>
                <div class="line-status">✓</div>
                <div class="line-content">                <span class=<span class="string">"keyword"</span>>for</span> i, line <span class=<span class="string">"keyword"</span>>in</span> enumerate(alias_lines):</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">294</div>
                <div class="line-status">✓</div>
                <div class="line-content">                    line = line.strip()</div>
            </div>
            <div class="code-line ">
                <div class="line-number">295</div>
                <div class="line-status"></div>
                <div class="line-content">                    </div>
            </div>
            <div class="code-line covered">
                <div class="line-number">296</div>
                <div class="line-status">✓</div>
                <div class="line-content">                    <span class=<span class="string">"keyword"</span>>if</span> i == 0:</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">297</div>
                <div class="line-status">✓</div>
                <div class="line-content">                        lines.append(f&quot;    + {line}&quot;)</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">298</div>
                <div class="line-status">✓</div>
                <div class="line-content">                    el<span class=<span class="string">"keyword"</span>>if</span> line.startswith(&quot;struct {&quot;):</div>
            </div>
            <div class="code-line ">
                <div class="line-number">299</div>
                <div class="line-status"></div>
                <div class="line-content">                        <span class="comment"># Start collecting nested struct content</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">300</div>
                <div class="line-status">✓</div>
                <div class="line-content">                        inside_struct = True</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">301</div>
                <div class="line-status">✓</div>
                <div class="line-content">                        nested_content = []</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">302</div>
                <div class="line-status">✓</div>
                <div class="line-content">                    el<span class=<span class="string">"keyword"</span>>if</span> line == &quot;}&quot;:</div>
            </div>
            <div class="code-line missing">
                <div class="line-number">303</div>
                <div class="line-status">✗</div>
                <div class="line-content">                        <span class=<span class="string">"keyword"</span>>if</span> inside_struct:</div>
            </div>
            <div class="code-line ">
                <div class="line-number">304</div>
                <div class="line-status"></div>
                <div class="line-content">                            <span class="comment"># Close nested struct <span class=<span class="string">"keyword"</span>>with</span> flattened content</span></div>
            </div>
            <div class="code-line missing">
                <div class="line-number">305</div>
                <div class="line-status">✗</div>
                <div class="line-content">                            <span class=<span class="string">"keyword"</span>>if</span> nested_content:</div>
            </div>
            <div class="code-line missing">
                <div class="line-number">306</div>
                <div class="line-status">✗</div>
                <div class="line-content">                                content_str = &quot;; &quot;.join(nested_content)</div>
            </div>
            <div class="code-line missing">
                <div class="line-number">307</div>
                <div class="line-status">✗</div>
                <div class="line-content">                                lines.append(f&quot;    + struct {{ {content_str} }}&quot;)</div>
            </div>
            <div class="code-line ">
                <div class="line-number">308</div>
                <div class="line-status"></div>
                <div class="line-content">                            <span class=<span class="string">"keyword"</span>>else</span>:</div>
            </div>
            <div class="code-line missing">
                <div class="line-number">309</div>
                <div class="line-status">✗</div>
                <div class="line-content">                                lines.append(f&quot;    + struct {{ }}&quot;)</div>
            </div>
            <div class="code-line missing">
                <div class="line-number">310</div>
                <div class="line-status">✗</div>
                <div class="line-content">                            inside_struct = False</div>
            </div>
            <div class="code-line missing">
                <div class="line-number">311</div>
                <div class="line-status">✗</div>
                <div class="line-content">                            nested_content = []</div>
            </div>
            <div class="code-line ">
                <div class="line-number">312</div>
                <div class="line-status"></div>
                <div class="line-content">                        <span class=<span class="string">"keyword"</span>>else</span>:</div>
            </div>
            <div class="code-line missing">
                <div class="line-number">313</div>
                <div class="line-status">✗</div>
                <div class="line-content">                            lines.append(f&quot;    }}&quot;)</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">314</div>
                <div class="line-status">✓</div>
                <div class="line-content">                    el<span class=<span class="string">"keyword"</span>>if</span> line <span class=<span class="string">"keyword"</span>>and</span> line != &quot;}&quot;:</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">315</div>
                <div class="line-status">✓</div>
                <div class="line-content">                        <span class=<span class="string">"keyword"</span>>if</span> inside_struct:</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">316</div>
                <div class="line-status">✓</div>
                <div class="line-content">                            nested_content.append(line)  <span class="comment"># Collect nested content</span></div>
            </div>
            <div class="code-line ">
                <div class="line-number">317</div>
                <div class="line-status"></div>
                <div class="line-content">                        <span class=<span class="string">"keyword"</span>>else</span>:</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">318</div>
                <div class="line-status">✓</div>
                <div class="line-content">                            lines.append(f&quot;+ {line}&quot;)</div>
            </div>
            <div class="code-line ">
                <div class="line-number">319</div>
                <div class="line-status"></div>
                <div class="line-content">                </div>
            </div>
            <div class="code-line ">
                <div class="line-number">320</div>
                <div class="line-status"></div>
                <div class="line-content">                <span class="comment"># If we were inside a struct but didn&#x27;t find a closing brace, add one</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">321</div>
                <div class="line-status">✓</div>
                <div class="line-content">                <span class=<span class="string">"keyword"</span>>if</span> inside_struct <span class=<span class="string">"keyword"</span>>and</span> nested_content:</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">322</div>
                <div class="line-status">✓</div>
                <div class="line-content">                    content_str = &quot;; &quot;.join(nested_content)</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">323</div>
                <div class="line-status">✓</div>
                <div class="line-content">                    lines.append(f&quot;    + struct {{ {content_str} }}&quot;)</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">324</div>
                <div class="line-status">✓</div>
                <div class="line-content">                lines.append(&quot;}&quot;)</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">325</div>
                <div class="line-status">✓</div>
                <div class="line-content">                lines.append(&quot;&quot;)</div>
            </div>
            <div class="code-line ">
                <div class="line-number">326</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line ">
                <div class="line-number">327</div>
                <div class="line-status"></div>
                <div class="line-content">        <span class="comment"># Unions</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">328</div>
                <div class="line-status">✓</div>
                <div class="line-content">        <span class=<span class="string">"keyword"</span>>for</span> union_name, union_data <span class=<span class="string">"keyword"</span>>in</span> sorted(file_model.unions.items()):</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">329</div>
                <div class="line-status">✓</div>
                <div class="line-content">            uml_id = uml_ids.get(f&quot;typedef_{union_name}&quot;)</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">330</div>
                <div class="line-status">✓</div>
                <div class="line-content">            <span class=<span class="string">"keyword"</span>>if</span> uml_id:</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">331</div>
                <div class="line-status">✓</div>
                <div class="line-content">                lines.append(</div>
            </div>
            <div class="code-line ">
                <div class="line-number">332</div>
                <div class="line-status"></div>
                <div class="line-content">                    f&<span class="comment">#x27;<span class=<span class="string">"keyword"</span>>class</span> &quot;{union_name}&quot; as {uml_id} &lt;&lt;typedef&gt;&gt; #LightYellow&#x27;</span></div>
            </div>
            <div class="code-line ">
                <div class="line-number">333</div>
                <div class="line-status"></div>
                <div class="line-content">                )</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">334</div>
                <div class="line-status">✓</div>
                <div class="line-content">                lines.append(&quot;{&quot;)</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">335</div>
                <div class="line-status">✓</div>
                <div class="line-content">                <span class=<span class="string">"keyword"</span>>for</span> field <span class=<span class="string">"keyword"</span>>in</span> sorted(union_data.fields, key=lambda x: x.name):</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">336</div>
                <div class="line-status">✓</div>
                <div class="line-content">                    self._generate_field_with_nested_structs(lines, field, &quot;    &quot;)</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">337</div>
                <div class="line-status">✓</div>
                <div class="line-content">                lines.append(&quot;}&quot;)</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">338</div>
                <div class="line-status">✓</div>
                <div class="line-content">                lines.append(&quot;&quot;)</div>
            </div>
            <div class="code-line ">
                <div class="line-number">339</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">340</div>
                <div class="line-status">✓</div>
                <div class="line-content">    <span class=<span class="string">"keyword"</span>>def</span> _generate_field_with_nested_structs(self, lines: List[str], field, base_indent: str):</div>
            </div>
            <div class="code-line ">
                <div class="line-number">341</div>
                <div class="line-status"></div>
                <div class="line-content">        &quot;&quot;&quot;Generate field <span class=<span class="string">"keyword"</span>>with</span> proper handling of nested structures&quot;&quot;&quot;</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">342</div>
                <div class="line-status">✓</div>
                <div class="line-content">        field_text = f&quot;{field.type} {field.name}&quot;</div>
            </div>
            <div class="code-line ">
                <div class="line-number">343</div>
                <div class="line-status"></div>
                <div class="line-content">        </div>
            </div>
            <div class="code-line ">
                <div class="line-number">344</div>
                <div class="line-status"></div>
                <div class="line-content">        <span class="comment"># Check <span class=<span class="string">"keyword"</span>>if</span> th<span class=<span class="string">"keyword"</span>>is</span> <span class=<span class="string">"keyword"</span>>is</span> a nested struct field</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">345</div>
                <div class="line-status">✓</div>
                <div class="line-content">        <span class=<span class="string">"keyword"</span>>if</span> field.type.startswith(&quot;struct {&quot;) <span class=<span class="string">"keyword"</span>>and</span> &<span class="comment">#x27;\n&#x27; <span class=<span class="string">"keyword"</span>>in</span> field.type:</span></div>
            </div>
            <div class="code-line ">
                <div class="line-number">346</div>
                <div class="line-status"></div>
                <div class="line-content">            <span class="comment"># Parse the nested struct content <span class=<span class="string">"keyword"</span>>and</span> flatten it</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">347</div>
                <div class="line-status">✓</div>
                <div class="line-content">            struct_parts = field.type.split(&<span class="comment">#x27;\n&#x27;)</span></div>
            </div>
            <div class="code-line ">
                <div class="line-number">348</div>
                <div class="line-status"></div>
                <div class="line-content">            </div>
            </div>
            <div class="code-line ">
                <div class="line-number">349</div>
                <div class="line-status"></div>
                <div class="line-content">            <span class="comment"># F<span class=<span class="string">"keyword"</span>>or</span> nested structs, flatten them to avoid PlantUML parsing issues</span></div>
            </div>
            <div class="code-line ">
                <div class="line-number">350</div>
                <div class="line-status"></div>
                <div class="line-content">            <span class="comment"># Format as: + struct { field_type field_name }</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">351</div>
                <div class="line-status">✓</div>
                <div class="line-content">            nested_content = []</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">352</div>
                <div class="line-status">✓</div>
                <div class="line-content">            <span class=<span class="string">"keyword"</span>>for</span> part <span class=<span class="string">"keyword"</span>>in</span> struct_parts[1:]:</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">353</div>
                <div class="line-status">✓</div>
                <div class="line-content">                part = part.strip()</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">354</div>
                <div class="line-status">✓</div>
                <div class="line-content">                <span class=<span class="string">"keyword"</span>>if</span> part <span class=<span class="string">"keyword"</span>>and</span> part != &quot;}&quot;:</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">355</div>
                <div class="line-status">✓</div>
                <div class="line-content">                    nested_content.append(part)</div>
            </div>
            <div class="code-line ">
                <div class="line-number">356</div>
                <div class="line-status"></div>
                <div class="line-content">            </div>
            </div>
            <div class="code-line covered">
                <div class="line-number">357</div>
                <div class="line-status">✓</div>
                <div class="line-content">            <span class=<span class="string">"keyword"</span>>if</span> nested_content:</div>
            </div>
            <div class="code-line ">
                <div class="line-number">358</div>
                <div class="line-status"></div>
                <div class="line-content">                <span class="comment"># Create a flattened representation</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">359</div>
                <div class="line-status">✓</div>
                <div class="line-content">                content_str = &quot;; &quot;.join(nested_content)</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">360</div>
                <div class="line-status">✓</div>
                <div class="line-content">                lines.append(f&quot;{base_indent}+ struct {{ {content_str} }} {field.name}&quot;)</div>
            </div>
            <div class="code-line ">
                <div class="line-number">361</div>
                <div class="line-status"></div>
                <div class="line-content">            <span class=<span class="string">"keyword"</span>>else</span>:</div>
            </div>
            <div class="code-line missing">
                <div class="line-number">362</div>
                <div class="line-status">✗</div>
                <div class="line-content">                lines.append(f&quot;{base_indent}+ struct {{ }} {field.name}&quot;)</div>
            </div>
            <div class="code-line ">
                <div class="line-number">363</div>
                <div class="line-status"></div>
                <div class="line-content">        <span class=<span class="string">"keyword"</span>>else</span>:</div>
            </div>
            <div class="code-line ">
                <div class="line-number">364</div>
                <div class="line-status"></div>
                <div class="line-content">            <span class="comment"># Handle regular multi-line field types</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">365</div>
                <div class="line-status">✓</div>
                <div class="line-content">            field_lines = field_text.split(&<span class="comment">#x27;\n&#x27;)</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">366</div>
                <div class="line-status">✓</div>
                <div class="line-content">            <span class=<span class="string">"keyword"</span>>for</span> i, line <span class=<span class="string">"keyword"</span>>in</span> enumerate(field_lines):</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">367</div>
                <div class="line-status">✓</div>
                <div class="line-content">                <span class=<span class="string">"keyword"</span>>if</span> i == 0:</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">368</div>
                <div class="line-status">✓</div>
                <div class="line-content">                    lines.append(f&quot;{base_indent}+ {line}&quot;)</div>
            </div>
            <div class="code-line ">
                <div class="line-number">369</div>
                <div class="line-status"></div>
                <div class="line-content">                <span class=<span class="string">"keyword"</span>>else</span>:</div>
            </div>
            <div class="code-line missing">
                <div class="line-number">370</div>
                <div class="line-status">✗</div>
                <div class="line-content">                    lines.append(f&quot;+ {line}&quot;)</div>
            </div>
            <div class="code-line ">
                <div class="line-number">371</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">372</div>
                <div class="line-status">✓</div>
                <div class="line-content">    <span class=<span class="string">"keyword"</span>>def</span> _generate_relationships(</div>
            </div>
            <div class="code-line ">
                <div class="line-number">373</div>
                <div class="line-status"></div>
                <div class="line-content">        self,</div>
            </div>
            <div class="code-line ">
                <div class="line-number">374</div>
                <div class="line-status"></div>
                <div class="line-content">        lines: List[str],</div>
            </div>
            <div class="code-line ">
                <div class="line-number">375</div>
                <div class="line-status"></div>
                <div class="line-content">        include_tree: Dict[str, FileModel],</div>
            </div>
            <div class="code-line ">
                <div class="line-number">376</div>
                <div class="line-status"></div>
                <div class="line-content">        uml_ids: Dict[str, str],</div>
            </div>
            <div class="code-line ">
                <div class="line-number">377</div>
                <div class="line-status"></div>
                <div class="line-content">        project_model: ProjectModel,</div>
            </div>
            <div class="code-line ">
                <div class="line-number">378</div>
                <div class="line-status"></div>
                <div class="line-content">    ):</div>
            </div>
            <div class="code-line ">
                <div class="line-number">379</div>
                <div class="line-status"></div>
                <div class="line-content">        &quot;&quot;&quot;Generate relationships between elements&quot;&quot;&quot;</div>
            </div>
            <div class="code-line ">
                <div class="line-number">380</div>
                <div class="line-status"></div>
                <div class="line-content">        <span class="comment"># 1. Include relationships</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">381</div>
                <div class="line-status">✓</div>
                <div class="line-content">        lines.append(&quot;&<span class="comment">#x27; Include relationships&quot;)</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">382</div>
                <div class="line-status">✓</div>
                <div class="line-content">        <span class=<span class="string">"keyword"</span>>for</span> file_name, file_model <span class=<span class="string">"keyword"</span>>in</span> sorted(include_tree.items()):</div>
            </div>
            <div class="code-line ">
                <div class="line-number">383</div>
                <div class="line-status"></div>
                <div class="line-content">            <span class="comment"># Use filename <span class=<span class="string">"keyword"</span>>for</span> file UML ID lookup</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">384</div>
                <div class="line-status">✓</div>
                <div class="line-content">            file_key = Path(file_name).name</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">385</div>
                <div class="line-status">✓</div>
                <div class="line-content">            file_uml_id = uml_ids.get(file_key)</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">386</div>
                <div class="line-status">✓</div>
                <div class="line-content">            <span class=<span class="string">"keyword"</span>>if</span> file_uml_id:</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">387</div>
                <div class="line-status">✓</div>
                <div class="line-content">                <span class=<span class="string">"keyword"</span>>for</span> include <span class=<span class="string">"keyword"</span>>in</span> sorted(file_model.includes):</div>
            </div>
            <div class="code-line ">
                <div class="line-number">388</div>
                <div class="line-status"></div>
                <div class="line-content">                    <span class="comment"># Clean the include name (remove quotes/angle brackets)</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">389</div>
                <div class="line-status">✓</div>
                <div class="line-content">                    clean_include = include.strip(&<span class="comment">#x27;&lt;&gt;&quot;&#x27;)</span></div>
            </div>
            <div class="code-line ">
                <div class="line-number">390</div>
                <div class="line-status"></div>
                <div class="line-content">                    </div>
            </div>
            <div class="code-line ">
                <div class="line-number">391</div>
                <div class="line-status"></div>
                <div class="line-content">                    <span class="comment"># Find the included file&#x27;s UML ID using filename</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">392</div>
                <div class="line-status">✓</div>
                <div class="line-content">                    include_filename = Path(clean_include).name</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">393</div>
                <div class="line-status">✓</div>
                <div class="line-content">                    include_uml_id = uml_ids.get(include_filename)</div>
            </div>
            <div class="code-line ">
                <div class="line-number">394</div>
                <div class="line-status"></div>
                <div class="line-content">                    </div>
            </div>
            <div class="code-line ">
                <div class="line-number">395</div>
                <div class="line-status"></div>
                <div class="line-content">                    <span class="comment"># If found, create the relationship</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">396</div>
                <div class="line-status">✓</div>
                <div class="line-content">                    <span class=<span class="string">"keyword"</span>>if</span> include_uml_id:</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">397</div>
                <div class="line-status">✓</div>
                <div class="line-content">                        lines.append(</div>
            </div>
            <div class="code-line ">
                <div class="line-number">398</div>
                <div class="line-status"></div>
                <div class="line-content">                            f&quot;{file_uml_id} --&gt; {include_uml_id} : &lt;&lt;include&gt;&gt;&quot;</div>
            </div>
            <div class="code-line ">
                <div class="line-number">399</div>
                <div class="line-status"></div>
                <div class="line-content">                        )</div>
            </div>
            <div class="code-line ">
                <div class="line-number">400</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">401</div>
                <div class="line-status">✓</div>
                <div class="line-content">        lines.append(&quot;&quot;)</div>
            </div>
            <div class="code-line ">
                <div class="line-number">402</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line ">
                <div class="line-number">403</div>
                <div class="line-status"></div>
                <div class="line-content">        <span class="comment"># 2. Declaration relationships</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">404</div>
                <div class="line-status">✓</div>
                <div class="line-content">        lines.append(&quot;&<span class="comment">#x27; Declaration relationships&quot;)</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">405</div>
                <div class="line-status">✓</div>
                <div class="line-content">        <span class=<span class="string">"keyword"</span>>for</span> file_name, file_model <span class=<span class="string">"keyword"</span>>in</span> sorted(include_tree.items()):</div>
            </div>
            <div class="code-line ">
                <div class="line-number">406</div>
                <div class="line-status"></div>
                <div class="line-content">            <span class="comment"># Use filename <span class=<span class="string">"keyword"</span>>for</span> file UML ID lookup</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">407</div>
                <div class="line-status">✓</div>
                <div class="line-content">            file_key = Path(file_name).name</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">408</div>
                <div class="line-status">✓</div>
                <div class="line-content">            file_uml_id = uml_ids.get(file_key)</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">409</div>
                <div class="line-status">✓</div>
                <div class="line-content">            <span class=<span class="string">"keyword"</span>>if</span> file_uml_id:</div>
            </div>
            <div class="code-line ">
                <div class="line-number">410</div>
                <div class="line-status"></div>
                <div class="line-content">                <span class="comment"># Find all typedefs declared <span class=<span class="string">"keyword"</span>>in</span> th<span class=<span class="string">"keyword"</span>>is</span> file</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">411</div>
                <div class="line-status">✓</div>
                <div class="line-content">                <span class=<span class="string">"keyword"</span>>for</span> typedef_name <span class=<span class="string">"keyword"</span>>in</span> sorted(file_model.structs.keys()):</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">412</div>
                <div class="line-status">✓</div>
                <div class="line-content">                    typedef_uml_id = uml_ids.get(f&quot;typedef_{typedef_name}&quot;)</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">413</div>
                <div class="line-status">✓</div>
                <div class="line-content">                    <span class=<span class="string">"keyword"</span>>if</span> typedef_uml_id:</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">414</div>
                <div class="line-status">✓</div>
                <div class="line-content">                        lines.append(</div>
            </div>
            <div class="code-line ">
                <div class="line-number">415</div>
                <div class="line-status"></div>
                <div class="line-content">                            f&quot;{file_uml_id} ..&gt; {typedef_uml_id} : &lt;&lt;declares&gt;&gt;&quot;</div>
            </div>
            <div class="code-line ">
                <div class="line-number">416</div>
                <div class="line-status"></div>
                <div class="line-content">                        )</div>
            </div>
            <div class="code-line ">
                <div class="line-number">417</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">418</div>
                <div class="line-status">✓</div>
                <div class="line-content">                <span class=<span class="string">"keyword"</span>>for</span> typedef_name <span class=<span class="string">"keyword"</span>>in</span> sorted(file_model.enums.keys()):</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">419</div>
                <div class="line-status">✓</div>
                <div class="line-content">                    typedef_uml_id = uml_ids.get(f&quot;typedef_{typedef_name}&quot;)</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">420</div>
                <div class="line-status">✓</div>
                <div class="line-content">                    <span class=<span class="string">"keyword"</span>>if</span> typedef_uml_id:</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">421</div>
                <div class="line-status">✓</div>
                <div class="line-content">                        lines.append(</div>
            </div>
            <div class="code-line ">
                <div class="line-number">422</div>
                <div class="line-status"></div>
                <div class="line-content">                            f&quot;{file_uml_id} ..&gt; {typedef_uml_id} : &lt;&lt;declares&gt;&gt;&quot;</div>
            </div>
            <div class="code-line ">
                <div class="line-number">423</div>
                <div class="line-status"></div>
                <div class="line-content">                        )</div>
            </div>
            <div class="code-line ">
                <div class="line-number">424</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">425</div>
                <div class="line-status">✓</div>
                <div class="line-content">                <span class=<span class="string">"keyword"</span>>for</span> typedef_name <span class=<span class="string">"keyword"</span>>in</span> sorted(file_model.aliases.keys()):</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">426</div>
                <div class="line-status">✓</div>
                <div class="line-content">                    typedef_uml_id = uml_ids.get(f&quot;typedef_{typedef_name}&quot;)</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">427</div>
                <div class="line-status">✓</div>
                <div class="line-content">                    <span class=<span class="string">"keyword"</span>>if</span> typedef_uml_id:</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">428</div>
                <div class="line-status">✓</div>
                <div class="line-content">                        lines.append(</div>
            </div>
            <div class="code-line ">
                <div class="line-number">429</div>
                <div class="line-status"></div>
                <div class="line-content">                            f&quot;{file_uml_id} ..&gt; {typedef_uml_id} : &lt;&lt;declares&gt;&gt;&quot;</div>
            </div>
            <div class="code-line ">
                <div class="line-number">430</div>
                <div class="line-status"></div>
                <div class="line-content">                        )</div>
            </div>
            <div class="code-line ">
                <div class="line-number">431</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">432</div>
                <div class="line-status">✓</div>
                <div class="line-content">                <span class=<span class="string">"keyword"</span>>for</span> typedef_name <span class=<span class="string">"keyword"</span>>in</span> sorted(file_model.unions.keys()):</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">433</div>
                <div class="line-status">✓</div>
                <div class="line-content">                    typedef_uml_id = uml_ids.get(f&quot;typedef_{typedef_name}&quot;)</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">434</div>
                <div class="line-status">✓</div>
                <div class="line-content">                    <span class=<span class="string">"keyword"</span>>if</span> typedef_uml_id:</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">435</div>
                <div class="line-status">✓</div>
                <div class="line-content">                        lines.append(</div>
            </div>
            <div class="code-line ">
                <div class="line-number">436</div>
                <div class="line-status"></div>
                <div class="line-content">                            f&quot;{file_uml_id} ..&gt; {typedef_uml_id} : &lt;&lt;declares&gt;&gt;&quot;</div>
            </div>
            <div class="code-line ">
                <div class="line-number">437</div>
                <div class="line-status"></div>
                <div class="line-content">                        )</div>
            </div>
            <div class="code-line ">
                <div class="line-number">438</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">439</div>
                <div class="line-status">✓</div>
                <div class="line-content">        lines.append(&quot;&quot;)</div>
            </div>
            <div class="code-line ">
                <div class="line-number">440</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line ">
                <div class="line-number">441</div>
                <div class="line-status"></div>
                <div class="line-content">        <span class="comment"># 3. Uses relationships</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">442</div>
                <div class="line-status">✓</div>
                <div class="line-content">        lines.append(&quot;&<span class="comment">#x27; Uses relationships&quot;)</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">443</div>
                <div class="line-status">✓</div>
                <div class="line-content">        <span class=<span class="string">"keyword"</span>>for</span> file_name, file_model <span class=<span class="string">"keyword"</span>>in</span> sorted(include_tree.items()):</div>
            </div>
            <div class="code-line ">
                <div class="line-number">444</div>
                <div class="line-status"></div>
                <div class="line-content">            <span class="comment"># Note: file_uml_id <span class=<span class="string">"keyword"</span>>not</span> needed <span class=<span class="string">"keyword"</span>>for</span> uses relationships, only type<span class=<span class="string">"keyword"</span>>def</span> UML IDs are used</span></div>
            </div>
            <div class="code-line ">
                <div class="line-number">445</div>
                <div class="line-status"></div>
                <div class="line-content">            <span class="comment"># Struct uses relationships</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">446</div>
                <div class="line-status">✓</div>
                <div class="line-content">            <span class=<span class="string">"keyword"</span>>for</span> struct_name, struct_data <span class=<span class="string">"keyword"</span>>in</span> sorted(file_model.structs.items()):</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">447</div>
                <div class="line-status">✓</div>
                <div class="line-content">                struct_uml_id = uml_ids.get(f&quot;typedef_{struct_name}&quot;)</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">448</div>
                <div class="line-status">✓</div>
                <div class="line-content">                <span class=<span class="string">"keyword"</span>>if</span> struct_uml_id <span class=<span class="string">"keyword"</span>>and</span> hasattr(struct_data, &quot;uses&quot;):</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">449</div>
                <div class="line-status">✓</div>
                <div class="line-content">                    <span class=<span class="string">"keyword"</span>>for</span> used_type <span class=<span class="string">"keyword"</span>>in</span> sorted(struct_data.uses):</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">450</div>
                <div class="line-status">✓</div>
                <div class="line-content">                        used_uml_id = uml_ids.get(f&quot;typedef_{used_type}&quot;)</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">451</div>
                <div class="line-status">✓</div>
                <div class="line-content">                        <span class=<span class="string">"keyword"</span>>if</span> used_uml_id:</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">452</div>
                <div class="line-status">✓</div>
                <div class="line-content">                            lines.append(</div>
            </div>
            <div class="code-line ">
                <div class="line-number">453</div>
                <div class="line-status"></div>
                <div class="line-content">                                f&quot;{struct_uml_id} ..&gt; {used_uml_id} : &lt;&lt;uses&gt;&gt;&quot;</div>
            </div>
            <div class="code-line ">
                <div class="line-number">454</div>
                <div class="line-status"></div>
                <div class="line-content">                            )</div>
            </div>
            <div class="code-line ">
                <div class="line-number">455</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line ">
                <div class="line-number">456</div>
                <div class="line-status"></div>
                <div class="line-content">            <span class="comment"># Alias uses relationships</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">457</div>
                <div class="line-status">✓</div>
                <div class="line-content">            <span class=<span class="string">"keyword"</span>>for</span> alias_name, alias_data <span class=<span class="string">"keyword"</span>>in</span> sorted(file_model.aliases.items()):</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">458</div>
                <div class="line-status">✓</div>
                <div class="line-content">                alias_uml_id = uml_ids.get(f&quot;typedef_{alias_name}&quot;)</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">459</div>
                <div class="line-status">✓</div>
                <div class="line-content">                <span class=<span class="string">"keyword"</span>>if</span> alias_uml_id <span class=<span class="string">"keyword"</span>>and</span> hasattr(alias_data, &quot;uses&quot;):</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">460</div>
                <div class="line-status">✓</div>
                <div class="line-content">                    <span class=<span class="string">"keyword"</span>>for</span> used_type <span class=<span class="string">"keyword"</span>>in</span> sorted(alias_data.uses):</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">461</div>
                <div class="line-status">✓</div>
                <div class="line-content">                        used_uml_id = uml_ids.get(f&quot;typedef_{used_type}&quot;)</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">462</div>
                <div class="line-status">✓</div>
                <div class="line-content">                        <span class=<span class="string">"keyword"</span>>if</span> used_uml_id:</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">463</div>
                <div class="line-status">✓</div>
                <div class="line-content">                            lines.append(f&quot;{alias_uml_id} ..&gt; {used_uml_id} : &lt;&lt;uses&gt;&gt;&quot;)</div>
            </div>
            <div class="code-line ">
                <div class="line-number">464</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line ">
                <div class="line-number">465</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">466</div>
                <div class="line-status">✓</div>
                <div class="line-content"><span class=<span class="string">"keyword"</span>>class</span> Generator:</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">467</div>
                <div class="line-status">✓</div>
                <div class="line-content">    &quot;&quot;&quot;Generat<span class=<span class="string">"keyword"</span>>or</span> that creates proper PlantUML files&quot;&quot;&quot;</div>
            </div>
            <div class="code-line ">
                <div class="line-number">468</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">469</div>
                <div class="line-status">✓</div>
                <div class="line-content">    <span class=<span class="string">"keyword"</span>>def</span> __init__(self):</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">470</div>
                <div class="line-status">✓</div>
                <div class="line-content">        pass</div>
            </div>
            <div class="code-line ">
                <div class="line-number">471</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">472</div>
                <div class="line-status">✓</div>
                <div class="line-content">    <span class=<span class="string">"keyword"</span>>def</span> generate(</div>
            </div>
            <div class="code-line ">
                <div class="line-number">473</div>
                <div class="line-status"></div>
                <div class="line-content">        self, model_file: str, output_dir: str = &quot;./output&quot;, include_depth: int = 1</div>
            </div>
            <div class="code-line ">
                <div class="line-number">474</div>
                <div class="line-status"></div>
                <div class="line-content">    ) -&gt; str:</div>
            </div>
            <div class="code-line ">
                <div class="line-number">475</div>
                <div class="line-status"></div>
                <div class="line-content">        &quot;&quot;&quot;Generate PlantUML files <span class=<span class="string">"keyword"</span>>for</span> all C files <span class=<span class="string">"keyword"</span>>in</span> the model&quot;&quot;&quot;</div>
            </div>
            <div class="code-line ">
                <div class="line-number">476</div>
                <div class="line-status"></div>
                <div class="line-content">        <span class="comment"># Load the model</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">477</div>
                <div class="line-status">✓</div>
                <div class="line-content">        project_model = self._load_model(model_file)</div>
            </div>
            <div class="code-line ">
                <div class="line-number">478</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line ">
                <div class="line-number">479</div>
                <div class="line-status"></div>
                <div class="line-content">        <span class="comment"># Create output directory</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">480</div>
                <div class="line-status">✓</div>
                <div class="line-content">        os.makedirs(output_dir, exist_ok=True)</div>
            </div>
            <div class="code-line ">
                <div class="line-number">481</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line ">
                <div class="line-number">482</div>
                <div class="line-status"></div>
                <div class="line-content">        <span class="comment"># Generate a PlantUML file <span class=<span class="string">"keyword"</span>>for</span> each C file</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">483</div>
                <div class="line-status">✓</div>
                <div class="line-content">        generated_files = []</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">484</div>
                <div class="line-status">✓</div>
                <div class="line-content">        generat<span class=<span class="string">"keyword"</span>>or</span> = PlantUMLGenerator()</div>
            </div>
            <div class="code-line ">
                <div class="line-number">485</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">486</div>
                <div class="line-status">✓</div>
                <div class="line-content">        <span class=<span class="string">"keyword"</span>>for</span> filename, file_model <span class=<span class="string">"keyword"</span>>in</span> sorted(project_model.files.items()):</div>
            </div>
            <div class="code-line ">
                <div class="line-number">487</div>
                <div class="line-status"></div>
                <div class="line-content">            <span class="comment"># Only process C files (<span class=<span class="string">"keyword"</span>>not</span> headers) <span class=<span class="string">"keyword"</span>>for</span> diagram generation</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">488</div>
                <div class="line-status">✓</div>
                <div class="line-content">            <span class=<span class="string">"keyword"</span>>if</span> file_model.relative_path.endswith(&quot;.c&quot;):</div>
            </div>
            <div class="code-line ">
                <div class="line-number">489</div>
                <div class="line-status"></div>
                <div class="line-content">                <span class="comment"># Generate PlantUML content</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">490</div>
                <div class="line-status">✓</div>
                <div class="line-content">                puml_content = generator.generate_diagram(</div>
            </div>
            <div class="code-line ">
                <div class="line-number">491</div>
                <div class="line-status"></div>
                <div class="line-content">                    file_model, project_model, include_depth</div>
            </div>
            <div class="code-line ">
                <div class="line-number">492</div>
                <div class="line-status"></div>
                <div class="line-content">                )</div>
            </div>
            <div class="code-line ">
                <div class="line-number">493</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line ">
                <div class="line-number">494</div>
                <div class="line-status"></div>
                <div class="line-content">                <span class="comment"># Create output filename</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">495</div>
                <div class="line-status">✓</div>
                <div class="line-content">                basename = Path(filename).stem</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">496</div>
                <div class="line-status">✓</div>
                <div class="line-content">                output_file = os.path.join(output_dir, f&quot;{basename}.puml&quot;)</div>
            </div>
            <div class="code-line ">
                <div class="line-number">497</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line ">
                <div class="line-number">498</div>
                <div class="line-status"></div>
                <div class="line-content">                <span class="comment"># Write the file</span></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">499</div>
                <div class="line-status">✓</div>
                <div class="line-content">                <span class=<span class="string">"keyword"</span>>with</span> open(output_file, &quot;w&quot;, encoding=&quot;utf-8&quot;) as f:</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">500</div>
                <div class="line-status">✓</div>
                <div class="line-content">                    f.write(puml_content)</div>
            </div>
            <div class="code-line ">
                <div class="line-number">501</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">502</div>
                <div class="line-status">✓</div>
                <div class="line-content">                generated_files.append(output_file)</div>
            </div>
            <div class="code-line ">
                <div class="line-number">503</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">504</div>
                <div class="line-status">✓</div>
                <div class="line-content">        <span class=<span class="string">"keyword"</span>>return</span> output_dir</div>
            </div>
            <div class="code-line ">
                <div class="line-number">505</div>
                <div class="line-status"></div>
                <div class="line-content"></div>
            </div>
            <div class="code-line covered">
                <div class="line-number">506</div>
                <div class="line-status">✓</div>
                <div class="line-content">    <span class=<span class="string">"keyword"</span>>def</span> _load_model(self, model_file: str) -&gt; ProjectModel:</div>
            </div>
            <div class="code-line ">
                <div class="line-number">507</div>
                <div class="line-status"></div>
                <div class="line-content">        &quot;&quot;&quot;Load the project model <span class=<span class="string">"keyword"</span>>from</span> JSON file&quot;&quot;&quot;</div>
            </div>
            <div class="code-line covered">
                <div class="line-number">508</div>
                <div class="line-status">✓</div>
                <div class="line-content">        <span class=<span class="string">"keyword"</span>>return</span> ProjectModel.load(model_file)</div>
            </div>
        </div>
    </div>
    
    <div class="legend">
        <h3 style="margin-top: 0;">Legend</h3>
        <div class="legend-item">
            <span class="legend-color" style="background: #e8f5e9;"></span>
            <span>✓ Covered</span>
        </div>
        <div class="legend-item">
            <span class="legend-color" style="background: #ffebee;"></span>
            <span>✗ Not Covered</span>
        </div>
        <div class="legend-item">
            <span class="legend-color" style="background: #f5f5f5;"></span>
            <span>— Excluded</span>
        </div>
    </div>
</body>
</html>
