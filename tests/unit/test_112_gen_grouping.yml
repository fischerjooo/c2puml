test:
  name: "Generator Grouping \u2013 Comprehensive"
  description: Validate grouping with empty line separation for functions and globals,
    plus mixed cases
  category: unit
  id: '112'
---
source_files:
  model.json: "{\n  \"project_name\": \"grouping_project\",\n  \"source_folder\":\
    \ \"/test\",\n  \"files\": {\n    \"math.c\": {\n      \"file_path\": \"math.c\"\
    ,\n      \"name\": \"math.c\",\n      \"includes\": [],\n      \"macros\": [],\n\
    \      \"enums\": {},\n      \"structs\": {},\n      \"unions\": {},\n      \"\
    aliases\": {},\n      \"functions\": [\n        {\"name\": \"Init\", \"return_type\"\
    : \"void\", \"is_declaration\": false, \"parameters\": []},\n        {\"name\"\
    : \"HelperFunction\", \"return_type\": \"void\", \"is_declaration\": false, \"\
    parameters\": []},\n        {\"name\": \"Calculate\", \"return_type\": \"int\"\
    , \"is_declaration\": false, \"parameters\": []},\n        {\"name\": \"InternalComputation\"\
    , \"return_type\": \"static int\", \"is_declaration\": false, \"parameters\":\
    \ []},\n        {\"name\": \"Shutdown\", \"return_type\": \"void\", \"is_declaration\"\
    : false, \"parameters\": []}\n      ],\n      \"globals\": []\n    },\n    \"\
    module.c\": {\n      \"file_path\": \"module.c\",\n      \"name\": \"module.c\"\
    ,\n      \"includes\": [],\n      \"macros\": [],\n      \"enums\": {},\n    \
    \  \"structs\": {},\n      \"unions\": {},\n      \"aliases\": {},\n      \"functions\"\
    : [],\n      \"globals\": [\n        {\"name\": \"api_version\", \"type\": \"\
    int\"},\n        {\"name\": \"internal_state\", \"type\": \"static int\"},\n \
    \       {\"name\": \"module_name\", \"type\": \"char*\"},\n        {\"name\":\
    \ \"debug_flag\", \"type\": \"static bool\"}\n      ]\n    },\n    \"processor.c\"\
    : {\n      \"file_path\": \"processor.c\",\n      \"name\": \"processor.c\",\n\
    \      \"includes\": [],\n      \"macros\": [],\n      \"enums\": {},\n      \"\
    structs\": {},\n      \"unions\": {},\n      \"aliases\": {},\n      \"functions\"\
    : [\n        {\"name\": \"ProcessData\", \"return_type\": \"int\", \"is_declaration\"\
    : false, \"parameters\": []},\n        {\"name\": \"ValidateInput\", \"return_type\"\
    : \"static bool\", \"is_declaration\": false, \"parameters\": []}\n      ],\n\
    \      \"globals\": [\n        {\"name\": \"error_count\", \"type\": \"int\"},\n\
    \        {\"name\": \"buffer_size\", \"type\": \"static size_t\"}\n      ]\n \
    \   }\n  },\n  \"include_relations\": []\n}\n"
---
config.json: "{\n  \"project_name\": \"grouping_project\",\n  \"source_folders\":\
  \ [\"src\"],\n  \"output_dir\": \"output\",\n  \"plantuml_jar_path\": \"/app/tools/plantuml-1.2024.8.jar\"\
  ,\n  \"use_short_names\": false,\n  \"group_by_visibility\": true\n}\n"
---
assertions:
  execution:
    exit_code: 0
  puml:
    syntax_valid: true
    files:
      math.c.puml:
        contains:
        - + void Init
        - + int Calculate
        - + void Shutdown
        - '- void HelperFunction'
        - '- static int InternalComputation'
        - -- Functions --
        regex_matches:
        - pattern: \+[^\-]*\n\s*\n[^\+]*\-
          description: Empty line between public and private function groups
      module.c.puml:
        contains:
        - + int api_version
        - + char* module_name
        - '- static int internal_state'
        - '- static bool debug_flag'
        - -- Global Variables --
        regex_matches:
        - pattern: \+[^\-]*\n\s*\n[^\+]*\-
          description: Empty line between public and private global groups
      processor.c.puml:
        contains:
        - + int error_count
        - + int ProcessData
        - '- static size_t buffer_size'
        - '- static bool ValidateInput'
        - -- Global Variables --
        - -- Functions --
