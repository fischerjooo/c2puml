---
test:
  name: "generator_visibility_logic_mixed_visibility"
  description: "Test mixed visibility scenarios with both public and private elements"
  cli_step: "generate_only"
  timeout: 30

---
source_files:
  model.json: |
    {
      "project_name": "test_project",
      "source_folder": "/test",
      "files": {
        "api.c": {
          "file_path": "api.c",
          "aliases": {},
          "anonymous_relationships": {},
          "enums": {},
          "functions": [
            {
              "name": "public_api",
              "return_type": "int",
              "is_declaration": false,
              "parameters": []
            },
            {
              "name": "private_helper",
              "return_type": "void",
              "is_declaration": false,
              "parameters": []
            }
          ],
          "globals": [
            {
              "name": "public_var",
              "type": "int"
            },
            {
              "name": "private_var",
              "type": "static int"
            }
          ],
          "include_relations": [],
          "includes": [],
          "macros": {},
          "structs": {},
          "unions": {}
        },
        "api.h": {
          "file_path": "api.h",
          "aliases": {},
          "anonymous_relationships": {},
          "enums": {},
          "functions": [
            {
              "name": "public_api",
              "return_type": "int",
              "is_declaration": true,
              "parameters": []
            }
          ],
          "globals": [
            {
              "name": "public_var",
              "type": "int"
            }
          ],
          "include_relations": [],
          "includes": [],
          "macros": {},
          "structs": {},
          "unions": {}
        }
      },
      "include_relations": []
    }

---
config.json: |
  {
    "project_name": "test_project",
    "output_dir": "output",
    "source_folders": ["src"]
  }

---
assertions:
  execution:
    exit_code: 0
  puml:
    contains:
      - "+ int public_api"
      - "- void private_helper"
      - "+ int public_var"
      - "- static int private_var"
    not_contains:
      - "- int public_api"
      - "+ void private_helper"
      - "- int public_var"
      - "+ static int private_var"