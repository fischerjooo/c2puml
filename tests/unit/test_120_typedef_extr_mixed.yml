test:
  name: Typedef Extraction - Comprehensive Mixed
  description: Test extraction of all typedef types in a comprehensive scenario
  category: unit
  id: '120'
---
source_files:
  comprehensive_typedefs.c: "// Comprehensive typedef extraction test\n\n// Simple\
    \ typedefs\ntypedef uint32_t MyLen;\ntypedef int32_t MyInt;\ntypedef char * MyString;\n\
    \n// Struct typedefs\ntypedef struct MyBuffer_tag {\n    MyLen length;\n    MyString\
    \ data;\n} MyBuffer;\n\ntypedef struct MyComplexStruct_tag {\n    MyLen id;\n\
    \    MyString name;\n    MyCallback callback;\n    log_level_t log_level;\n} MyComplex;\n\
    \n// Function pointer typedefs\ntypedef int (*MyCallback)(MyBuffer * buffer);\n\
    typedef void (*log_callback_t)(log_level_t level, const char * message);\n\n//\
    \ Pointer typedefs\ntypedef MyComplex * MyComplexPtr;\ntypedef MyComplexPtr MyComplexArray[10];\n\
    \n// Enum typedefs\ntypedef enum Color_tag {\n    COLOR_RED,\n    COLOR_GREEN,\n\
    \    COLOR_BLUE\n} Color_t;\n\n// Union typedefs\ntypedef union Number_tag {\n\
    \    int i;\n    float f;\n} Number_t;\n"
---
config.json: "{\n  \"project_name\": \"test_typedef_extraction_comprehensive\",\n\
  \  \"source_folders\": [\".\"],\n  \"output_dir\": \"./output\",\n  \"recursive_search\"\
  : true\n}\n"
---
assertions:
  execution:
    exit_code: 0
    output_files:
    - model.json
    - model_transformed.json
    - comprehensive_typedefs.puml
  model:
    files:
      comprehensive_typedefs.c:
        aliases:
        - MyLen
        - MyInt
        - MyString
        - MyCallback
        - log_callback_t
        - MyComplexPtr
        - MyComplexArray
        structs:
          MyBuffer:
            fields:
            - length
            - data
          MyComplex:
            fields:
            - id
            - name
            - callback
            - log_level
        enums:
          Color_t:
            values:
            - COLOR_RED
            - COLOR_GREEN
            - COLOR_BLUE
        unions:
          Number_t:
            fields:
            - i
            - f
    element_counts:
      structs: 2
      enums: 1
      functions: 0
      globals: 0
      includes: 0
  puml:
    syntax_valid: true
    files:
      comprehensive_typedefs.puml:
        contains_elements:
        - MyLen
        - MyInt
        - MyString
        - MyBuffer
        - MyComplex
        - MyCallback
        - log_callback_t
        - MyComplexPtr
        - MyComplexArray
        - Color_t
        - Number_t
        contains_lines:
        - class "MyLen" as TYPEDEF_MYLEN
        - class "MyBuffer" as TYPEDEF_MYBUFFER
        - class "Color_t" as TYPEDEF_COLOR_T
        - class "Number_t" as TYPEDEF_NUMBER_T
        class_count: 12
        relationship_count: 19
