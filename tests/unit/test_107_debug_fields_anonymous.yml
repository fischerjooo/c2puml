test:
  name: Debug Nested Anonymous Structure Fields
  id: '107'
  description: Validate nested anonymous structure field parsing and naming conventions
---
source_files:
  anonymous_fields.c: "typedef struct {\n    int id;\n    struct {\n        char label[32];\n\
    \        union {\n            int int_val;\n            float float_val;\n   \
    \     };  // Anonymous union within anonymous struct\n        double precision;\n\
    \    } config;  // Named anonymous struct field\n    union {\n        struct {\n\
    \            int width;\n            int height;\n        } dimensions;  // Named\
    \ struct within anonymous union\n        long area;\n    };  // Anonymous union\n\
    } container_t;\n\nvoid setup_container(container_t* c) {\n    c->id = 1;\n   \
    \ c->config.precision = 1.0;\n    c->dimensions.width = 800;\n}\n\ncontainer_t\
    \ global_container = {0};\n"
---
config.json: "{\n  \"project_name\": \"debug_nested_anonymous_structure_fields\",\n\
  \  \"source_folders\": [\".\"],\n  \"output_dir\": \"./output\",\n  \"recursive_search\"\
  : true\n}\n"
---
cli_execution:
  steps:
  - parse_only
---
assertions:
  execution:
    should_succeed: true
  model:
    structs_exist:
    - container_t
    - container_t_config
    - __anonymous_struct__
    - __anonymous_union___dimensions
    unions_exist:
    - __anonymous_union__
    - container_t_dimensions
    functions_exist:
    - setup_container
    globals_exist:
    - global_container
    struct_fields:
      __anonymous_union___dimensions:
      - name: width
        type: int
      - name: height
        type: int
    union_fields:
      container_t_dimensions:
      - name: width
        type: int
      - name: height
        type: int
    element_counts:
      structs: 4
      unions: 2
      functions: 1
      globals: 1
      aliases: 0
  puml:
    contains_elements:
    - container_t
    - setup_container
    - global_container
    contains_lines:
    - void setup_container(container_t * c)
    - + int id
    - + container_t_config config
    - + container_t_dimensions dimensions
    - + long area
    - + int int_val
    - + float float_val
    - + int width
    - + int height
    - container_t global_container
    class_count: 7
    relationship_count: 6
