test:
  name: Typedef Extraction - Edge Cases
  description: Test typedef extraction with edge cases (comments, whitespace, etc.)
  category: unit
  id: '120'
---
source_files:
  edge_cases_typedefs.c: |
    // Edge cases for typedef extraction

    // This is a comment
    typedef uint32_t MyLen;  // Another comment

    /* Multi-line comment
       about typedefs */
    typedef int32_t MyInt;

    typedef char * MyString; /* Inline comment */

    // Typedef with extra whitespace
    typedef  unsigned   long   long    ULongLong  ;

    // Typedef with const and volatile
    typedef const char * ConstString;
    typedef volatile int VolatileInt;

    /* Complex typedef with nested comments */
    typedef struct /* comment */ Point_tag {
        int x; // X coordinate
        int y; /* Y coordinate */
    } Point_t;
---
config.json: |
  {
    "project_name": "test_typedef_extraction_edge_cases",
    "source_folders": ["."],
    "output_dir": "./output",
    "recursive_search": true
  }
---
assertions:
  execution:
    exit_code: 0
    output_files:
    - model.json
    - model_transformed.json
    - edge_cases_typedefs.puml
  model:
    files:
      edge_cases_typedefs.c:
        aliases:
        - MyLen
        - MyInt
        - MyString
        - ULongLong
        - ConstString
        - VolatileInt
        structs:
          Point_t:
            fields:
            - x
            - y
    element_counts:
      structs: 1
      enums: 0
      functions: 0
      globals: 0
      includes: 0
  puml:
    syntax_valid: true
    files:
      edge_cases_typedefs.puml:
        contains_elements:
        - MyLen
        - MyInt
        - MyString
        - ULongLong
        - ConstString
        - VolatileInt
        - Point_t
        contains_lines:
        - class "MyLen" as TYPEDEF_MYLEN
        - class "MyInt" as TYPEDEF_MYINT
        - class "Point_t" as TYPEDEF_POINT_T
        class_count: 8
        relationship_count: 7
