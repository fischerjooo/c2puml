test:
  name: Basic PlantUML Generation
  description: Test basic PlantUML generation with structs, enums, functions, globals,
    includes, macros, and typedefs
  category: unit
  id: '101'
---
source_files:
  main.c: "#include <stdio.h>\n#include <stdlib.h>\n#include \"local.h\"\n\n#define\
    \ MAX_SIZE 100\n#define DEBUG_MODE 1\n#define VERSION \"1.0\"\n\ntypedef int Integer;\n\
    typedef char* String;\ntypedef void (*Callback)(int);\n\nstruct Person {\n   \
    \ char* name;\n    int age;\n    float height;\n};\n\nstruct Config {\n    int\
    \ max_users;\n    int timeout;\n};\n\nenum Status {\n    OK,\n    ERROR,\n   \
    \ PENDING\n};\n\nenum Color {\n    RED,\n    GREEN,\n    BLUE\n};\n\nunion Data\
    \ {\n    int integer_value;\n    float float_value;\n    char* string_value;\n\
    };\n\nint global_var = 42;\nchar* global_string = \"test\";\n\nint main() {\n\
    \    return 0;\n}\n\nvoid process_data(void* data) {\n    // Process data\n}\n\
    \nfloat calculate(float a, float b) {\n    return a + b;\n}\n"
---
config.json: "{\n  \"project_name\": \"test_generator_basic_plantuml\",\n  \"source_folders\"\
  : [\".\"],\n  \"output_dir\": \"./output\",\n  \"recursive_search\": true\n}\n"
---
assertions:
  execution:
    exit_code: 0
    output_files:
    - model.json
    - model_transformed.json
    - main.puml
  model:
    files:
      main.c:
        structs:
          Person:
            fields:
            - name
            - age
            - height
          Config:
            fields:
            - max_users
            - timeout
        enums:
          Status:
            values:
            - OK
            - ERROR
            - PENDING
          Color:
            values:
            - RED
            - GREEN
            - BLUE
        unions:
          Data:
            fields:
            - integer_value
            - float_value
            - string_value
        functions:
        - main
        - process_data
        - calculate
        globals:
        - global_var
        - global_string
        macros:
        - MAX_SIZE
        - DEBUG_MODE
        - VERSION
        aliases:
        - Integer
        - String
        - Callback
        includes:
        - stdio.h
        - stdlib.h
        - local.h
    element_counts:
      structs: 2
      enums: 2
      unions: 1
      functions: 3
      globals: 2
      macros: 3
      aliases: 3
  puml:
    syntax_valid: true
    files:
      main.puml:
        contains_elements:
        - Person
        - Config
        - Status
        - Color
        - Data
        - main
        contains_lines:
        - class "Person" as TYPEDEF_PERSON
        - class "Config" as TYPEDEF_CONFIG
        - class "Status" as TYPEDEF_STATUS
        class_count: 9
        relationship_count: 8
